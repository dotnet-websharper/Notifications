(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca;b=a.WebSharper=a.WebSharper||{};c=b.Notifications=b.Notifications||{};d=c.Sample=c.Sample||{};e=d.Client=d.Client||{};f=b.Operators=b.Operators||{};g=b.Obj=b.Obj||{};h=b.UI=b.UI||{};i=h.Templating=h.Templating||{};j=i.Runtime=i.Runtime||{};k=j.Server=j.Server||{};l=k.TemplateInstance=k.TemplateInstance||{};m=b.Arrays=b.Arrays||{};n=k.ProviderBuilder=k.ProviderBuilder||{};o=h.Var=h.Var||{};p=k.Handler=k.Handler||{};q=b.Unchecked=b.Unchecked||{};r=a.WebSharper$Notifications$Sample_Templates=a.WebSharper$Notifications$Sample_Templates||{};s=h.TemplateHole=h.TemplateHole||{};t=h.TemplateHoleModule=h.TemplateHoleModule||{};u=t.TextView=t.TextView||{};v=a.System=a.System||{};w=v.Guid=v.Guid||{};x=a.StartupCode$WebSharper_Notifications_Sample$Client=a.StartupCode$WebSharper_Notifications_Sample$Client||{};y=t.EventQ=t.EventQ||{};z=b.JavaScript=b.JavaScript||{};A=z.Pervasives=z.Pervasives||{};B=b.Concurrency=b.Concurrency||{};C=z.Promise=z.Promise||{};D=a.EventTarget;E=h.Client=h.Client||{};F=E.Templates=E.Templates||{};G=h.Doc=h.Doc||{};H=b.Collections=b.Collections||{};I=H.Dictionary=H.Dictionary||{};J=a.Node;K=h.Var$1=h.Var$1||{};L=a.Object;M=B.AsyncBody=B.AsyncBody||{};N=B.CT=B.CT||{};O=H.HashSet=H.HashSet||{};P=b.Seq=b.Seq||{};Q=k.TemplateInitializer=k.TemplateInitializer||{};R=t.VarStr=t.VarStr||{};S=t.VarFloatUnchecked=t.VarFloatUnchecked||{};T=t.VarBool=t.VarBool||{};U=t.VarDateTime=t.VarDateTime||{};V=t.VarFile=t.VarFile||{};W=z.JS=z.JS||{};X=t.VarDomElement=t.VarDomElement||{};Y=h.View=h.View||{};Z=b.Numeric=b.Numeric||{};_0=h.ConcreteVar=h.ConcreteVar||{};_1=h.Snap=h.Snap||{};_2=B.Scheduler=B.Scheduler||{};_3=a.Error;_4=z.NonStandardPromiseRejectionException=z.NonStandardPromiseRejectionException||{};_5=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};_6=H.DictionaryUtil=H.DictionaryUtil||{};_7=b.Enumerator=b.Enumerator||{};_8=_7.T=_7.T||{};_9=a.WindowOrWorkerGlobalScope;_=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};$=h.Docs=h.Docs||{};ba=h.DocElemNode=h.DocElemNode||{};bb=a.CharacterData;bc=h.Abbrev=h.Abbrev||{};bd=bc.Fresh=bc.Fresh||{};be=b.OperationCanceledException=b.OperationCanceledException||{};bf=b.CancellationTokenSource=b.CancellationTokenSource||{};bg=a.Blob;bh=h.Elt=h.Elt||{};bi=a.Element;bj=F.Prepare=F.Prepare||{};bk=b.Slice=b.Slice||{};bl=h.DomUtility=h.DomUtility||{};bm=H.KeyCollection=H.KeyCollection||{};bn=h.An=h.An||{};bo=E.Settings=E.Settings||{};bp=bc.Mailbox=bc.Mailbox||{};bq=E.Attrs=E.Attrs||{};br=bq.Dyn=bq.Dyn||{};bs=h.Attrs=h.Attrs||{};bt=t.Elt=t.Elt||{};bu=t.Text=t.Text||{};bv=t.Attribute=t.Attribute||{};bw=t.Event=t.Event||{};bx=h.AttrModule=h.AttrModule||{};by=h.AttrProxy=h.AttrProxy||{};bz=t.AfterRender=t.AfterRender||{};bA=t.AfterRenderQ=t.AfterRenderQ||{};bB=b.List=b.List||{};bC=bB.T=bB.T||{};bD=b.Strings=b.Strings||{};bE=h.Array=h.Array||{};bF=h.Updates=h.Updates||{};bG=H.ValueCollection=H.ValueCollection||{};bH=E.Docs=E.Docs||{};bI=bH.RunState=bH.RunState||{};bJ=bH.NodeSet=bH.NodeSet||{};bK=h.Anims=h.Anims||{};bL=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bM=H.HashSetUtil=H.HashSetUtil||{};bN=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bO=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bP=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bQ=h.AppendList=h.AppendList||{};bR=h.DynamicAttrNode=h.DynamicAttrNode||{};bS=b.KeyNotFoundException=b.KeyNotFoundException||{};bT=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bU=h.Easing=h.Easing||{};bV=bc.HashSet=bc.HashSet||{};bW=h.BindVar=h.BindVar||{};bX=h.String=h.String||{};bY=h.CheckedInput=h.CheckedInput||{};bZ=bH.DomNodes=bH.DomNodes||{};b0=b.Char=b.Char||{};b1=b.DateUtil=b.DateUtil||{};b2=b.Lazy=b.Lazy||{};b3=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b4=b.Queue=b.Queue||{};b5=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};b6=b5.LazyRecord=b5.LazyRecord||{};b7=a.Notification;b8=a.Promise;b9=b&&b.Runtime;b_=a.console;b$=a.Math;ca=a.Date;e.Main=function(){var cb,cc,cd,ce,cf,cg,ch;cb=(cc=(cd=(ce=e.status().get_View(),(cf=new n.New$1(),(cf.h.push(new u.New("status",ce)),cf))),(cd.h.push(p.EventQ2(cd.k,"requestnotification",function(){return cd.i;},function(){var ci;B.Start((ci=null,B.Delay(function(){return B.Bind(C.AsAsync(e.requestNotification()),function(){return B.Return(null);});})),null);})),cd)),(cg=p.CompleteHoles(cc.k,cc.h,[]),(ch=new l.New(cg[1],r.main(cg[0])),cc.i=ch,ch))).get_Doc();F.LoadLocalTemplates("");G.RunById("main",cb);};e.status=function(){x.$cctor();return x.status;};e.requestNotification=function(){var cb;function cc(){function cd(){return b7.requestPermission().then(function(cf){var cg;return cf=="granted"?(e.status().Set("Notifications sent!"),new b7("Hello! Notifications are enabled.",(cg={},cg.body="This is a test notification.",cg)),b8.resolve(null)):(e.status().Set("Notifications denied!"),b8.resolve(null));});}function ce(cf){e.status().Set(a.String(cf.message));return b8.resolve(null);}return new b8(function(cf){cf(cd());})["catch"](function(cf){return ce(C.unwrapExn(cf));});}cb=null;return new b8(function(cd){cd(cc());});};f.FailWith=function(cb){throw new _3(cb);};f.KeyValue=function(cb){return[cb.K,cb.V];};f.range=function(cb,cc){var cd;cd=1+cc-cb;return cd<=0?[]:P.init(cd,function(ce){return ce+cb;});};g=b.Obj=b9.Class({Equals:function(cb){return this===cb;},GetHashCode:function(){return -1;}},null,g);g.New=b9.Ctor(function(){},g);l=k.TemplateInstance=b9.Class({get_Doc:function(){return this.doc;},SetAnchorRoot:function(cb){this.anchorRoot=cb;}},g,l);l.New=b9.Ctor(function(cb,cc){g.New.call(this);this.doc=cc;this.allVars=cb.$==0?cb.$0:f.FailWith("Should not happen");this.anchorRoot=null;},l);m.get=function(cb,cc){m.checkBounds(cb,cc);return cb[cc];};m.length=function(cb){return cb.dims===2?cb.length*cb.length:cb.length;};m.checkBounds=function(cb,cc){if(cc<0||cc>=cb.length)f.FailWith("Index was outside the bounds of the array.");};m.set=function(cb,cc,cd){m.checkBounds(cb,cc);cb[cc]=cd;};n=k.ProviderBuilder=b9.Class({},g,n);n.New$1=b9.Ctor(function(){var cb;g.New.call(this);this.i=null;this.k=(cb=w.NewGuid(),a.String(cb));this.h=b9.MarkResizable([]);b9.SetOptional(this,"s",null);},n);o=h.Var=b9.Class({},g,o);o.New=b9.Ctor(function(){g.New.call(this);},o);p.EventQ2=function(cb,cc,cd,ce){return new y.New(cc,function(cf){return function(cg){var ch;ch=cd();ch.SetAnchorRoot(cf);return ce({Vars:ch,Anchors:ch,Target:cf,Event:cg});};});};p.CompleteHoles=function(cb,cc,cd){var cf,cg,ch,ci,cj;function ce(ck,cl,cm){var cn;return cg.Contains(ck)?null:(cn=q.Equals(cl,0)?Q.GetOrAddHoleFor(cb,ck,function(){return new R.New(ck,K.Create$1(""));}):q.Equals(cl,1)?Q.GetOrAddHoleFor(cb,ck,function(){return new S.New(ck,K.Create$1(0));}):q.Equals(cl,2)?Q.GetOrAddHoleFor(cb,ck,function(){return new T.New(ck,K.Create$1(false));}):q.Equals(cl,3)?Q.GetOrAddHoleFor(cb,ck,function(){return new U.New(ck,K.Create$1(-8640000000000000));}):q.Equals(cl,4)?Q.GetOrAddHoleFor(cb,ck,function(){return new V.New(ck,K.Create$1([]));}):q.Equals(cl,5)?Q.GetOrAddHoleFor(cb,ck,function(){var co;co=self.document.querySelector("[ws-dom="+ck+"]");co.removeAttribute("ws-dom");return new X.New(ck,K.Create$1({$:1,$0:co}));}):f.FailWith("Invalid value type"),(cf.set_Item(ck,cn),{$:1,$0:cn}));}cf=new I.New$5();cg=new O.New$3();ch=_7.Get(cc);try{while(ch.MoveNext()){ci=ch.Current();cj=ci.get_Name();cg.SAdd(cj);cf.set_Item(cj,ci);}}finally{if(typeof ch=="object"&&"Dispose"in ch)ch.Dispose();}return[P.append(cc,m.choose(function(ck){return ce(ck[0],ck[1],ck[2]);},cd)),{$:0,$0:cf}];};q.Equals=function(cb,cc){var cd,ce,cf,cg;if(cb===cc)return true;else{cd=typeof cb;if(cd=="object"){if(cb===null||cb===void 0||cc===null||cc===void 0||!q.Equals(typeof cc,"object"))return false;else if("Equals"in cb)return cb.Equals(cc);else if("Equals"in cc)return false;else if(cb instanceof a.Array&&cc instanceof a.Array)return q.arrayEquals(cb,cc);else if(cb instanceof a.Date&&cc instanceof a.Date)return q.dateEquals(cb,cc);else{ce=[true];for(var ch in cb)if(function(ci){ce[0]=!cb.hasOwnProperty(ci)||cc.hasOwnProperty(ci)&&q.Equals(cb[ci],cc[ci]);return!ce[0];}(ch))break;if(ce[0]){for(var ci in cc)if(function(cj){ce[0]=!cc.hasOwnProperty(cj)||cb.hasOwnProperty(cj);return!ce[0];}(ci))break;}return ce[0];}}else return cd=="function"&&("$Func"in cb?cb.$Func===cc.$Func&&cb.$Target===cc.$Target:"$Invokes"in cb&&"$Invokes"in cc&&q.arrayEquals(cb.$Invokes,cc.$Invokes));}};q.arrayEquals=function(cb,cc){var cd,ce;if(m.length(cb)===m.length(cc)){cd=true;ce=0;while(cd&&ce<m.length(cb)){!q.Equals(m.get(cb,ce),m.get(cc,ce))?cd=false:void 0;ce=ce+1;}return cd;}else return false;};q.dateEquals=function(cb,cc){return cb.getTime()===cc.getTime();};q.Hash=function(cb){var cc;cc=typeof cb;return cc=="function"?0:cc=="boolean"?cb?1:0:cc=="number"?cb:cc=="string"?q.hashString(cb):cc=="object"?cb==null?0:cb instanceof a.Array?q.hashArray(cb):q.hashObject(cb):0;};q.hashString=function(cb){var cc,cd,ce;if(cb===null)return 0;else{cc=5381;for(cd=0,ce=cb.length-1;cd<=ce;cd++)cc=q.hashMix(cc,cb[cd].charCodeAt());return cc;}};q.hashArray=function(cb){var cc,cd,ce;cc=-34948909;for(cd=0,ce=m.length(cb)-1;cd<=ce;cd++)cc=q.hashMix(cc,q.Hash(m.get(cb,cd)));return cc;};q.hashObject=function(cb){var cc,cd;if("GetHashCode"in cb)return cb.GetHashCode();else{cc=[0];for(var ce in cb)if(function(cf){cc[0]=q.hashMix(q.hashMix(cc[0],q.hashString(cf)),q.Hash(cb[cf]));return false;}(ce))break;return cc[0];}};q.hashMix=function(cb,cc){return(cb<<5)+cb+cc;};q.Compare=function(cb,cc){var cd,ce,cf,cg,ch,ci;if(cb===cc)return 0;else{ce=typeof cb;switch(ce=="function"?1:ce=="boolean"?2:ce=="number"?2:ce=="string"?2:ce=="object"?3:0){case 0:return typeof cc=="undefined"?0:-1;case 1:return f.FailWith("Cannot compare function values.");case 2:return cb<cc?-1:1;case 3:if(cb===null)cf=-1;else if(cc===null)cf=1;else if("CompareTo"in cb)cf=cb.CompareTo(cc);else if("CompareTo0"in cb)cf=cb.CompareTo0(cc);else if(cb instanceof a.Array&&cc instanceof a.Array)cf=q.compareArrays(cb,cc);else if(cb instanceof a.Date&&cc instanceof a.Date)cf=q.compareDates(cb,cc);else{cg=[0];for(var cj in cb)if(function(ck){return!cb.hasOwnProperty(ck)?false:!cc.hasOwnProperty(ck)?(cg[0]=1,true):(cg[0]=q.Compare(cb[ck],cc[ck]),cg[0]!==0);}(cj))break;if(cg[0]===0){for(var ck in cc)if(function(cl){return!cc.hasOwnProperty(cl)?false:!cb.hasOwnProperty(cl)&&(cg[0]=-1,true);}(ck))break;}cf=cg[0];}return cf;}}};q.compareArrays=function(cb,cc){var cd,ce;if(m.length(cb)<m.length(cc))return -1;else if(m.length(cb)>m.length(cc))return 1;else{cd=0;ce=0;while(cd===0&&ce<m.length(cb)){cd=q.Compare(m.get(cb,ce),m.get(cc,ce));ce=ce+1;}return cd;}};q.compareDates=function(cb,cc){return q.Compare(cb.getTime(),cc.getTime());};r.main=function(cb){F.LoadLocalTemplates("index");return cb?F.NamedTemplate("index",{$:1,$0:"main"},cb):void 0;};s=h.TemplateHole=b9.Class({ForTextView:function(){b_.warn("Content hole filled with attribute data",this.get_Name());return null;},AddAttribute:function(cb,cc){b_.warn("Var hole filled with non-Var data",this.get_Name());},get_AsChoiceView:function(){b_.warn("Attribute value hole filled with non-text data",this.get_Name());return{$:0,$0:""};}},g,s);s.New=b9.Ctor(function(){g.New.call(this);},s);u=t.TextView=b9.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith};},get_AsChoiceView:function(){return{$:1,$0:this.fillWith};}},s,u);u.New=b9.Ctor(function(cb,cc){s.New.call(this);this.name=cb;this.fillWith=cc;},u);w.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(cb){var cc,cd;cc=b$.random()*16|0;cd=cb=="x"?cc:cc&3|8;return cd.toString(16);});};x.$cctor=function(){x.$cctor=a.ignore;x.status=K.Create$1("");};y=t.EventQ=b9.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},s,y);y.New=b9.Ctor(function(cb,cc){s.New.call(this);this.name=cb;this.fillWith=cc;},y);A.NewFromSeq=function(cb){var cc,cd,ce;cc={};cd=_7.Get(cb);try{while(cd.MoveNext()){ce=cd.Current();cc[ce[0]]=ce[1];}}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}return cc;};B.Delay=function(cb){return function(cc){try{(cb(null))(cc);}catch(cd){cc.k({$:1,$0:cd});}};};B.Bind=function(cb,cc){return B.checkCancel(function(cd){cb(M.New(function(ce){var cf;if(ce.$==0){cf=ce.$0;B.scheduler().Fork(function(){try{(cc(cf))(cd);}catch(cg){cd.k({$:1,$0:cg});}});}else B.scheduler().Fork(function(){cd.k(ce);});},cd.ct));});};B.Return=function(cb){return function(cc){cc.k({$:0,$0:cb});};};B.Start=function(cb,cc){var cd,ce;cd=(ce=(B.defCTS())[0],cc==null?ce:cc.$0);B.scheduler().Fork(function(){if(!cd.c)cb(M.New(function(cf){if(cf.$==1)B.UncaughtAsyncError(cf.$0);},cd));});};B.checkCancel=function(cb){return function(cc){if(cc.ct.c)B.cancel(cc);else cb(cc);};};B.defCTS=function(){_5.$cctor();return _5.defCTS;};B.UncaughtAsyncError=function(cb){b_.log("WebSharper: Uncaught asynchronous exception",cb);};B.cancel=function(cb){cb.k({$:2,$0:new be.New(cb.ct)});};B.scheduler=function(){_5.$cctor();return _5.scheduler;};B.FromContinuations=function(cb){return function(cc){var cd;function ce(cf){if(cd[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cd[0]=true;B.scheduler().Fork(cf);}}cd=[false];cb(function(cf){ce(function(){cc.k({$:0,$0:cf});});},function(cf){ce(function(){cc.k({$:1,$0:cf});});},function(cf){ce(function(){cc.k({$:2,$0:cf});});});};};B.Zero=function(){_5.$cctor();return _5.Zero;};C.AsAsync=function(cb){return B.FromContinuations(function(cc,cd){cb.then(cc,function(ce){return cd(C.unwrapExn(ce));});});};C.unwrapExn=function(cb){return cb instanceof _3?cb:new _4.New(cb);};F.LoadLocalTemplates=function(cb){!F.LocalTemplatesLoaded()?(F.set_LocalTemplatesLoaded(true),F.LoadNestedTemplates(self.document.body,"")):void 0;F.LoadedTemplates().set_Item(cb,F.LoadedTemplateFile(""));};F.NamedTemplate=function(cb,cc,cd){var ce,cf;ce=(cf=null,[F.LoadedTemplateFile(cb).TryGetValue(cc==null?"":cc.$0,{get:function(){return cf;},set:function(cg){cf=cg;}}),cf]);return ce[0]?F.ChildrenTemplate(ce[1].cloneNode(true),cd):(b_.warn("Local template doesn't exist",cc),G.get_Empty());};F.LocalTemplatesLoaded=function(){_.$cctor();return _.LocalTemplatesLoaded;};F.set_LocalTemplatesLoaded=function(cb){_.$cctor();_.LocalTemplatesLoaded=cb;};F.LoadNestedTemplates=function(cb,cc){var ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy;function cd(cz){var cA,cB;if(!ce.ContainsKey(cz)){cA=(cB=null,[cf.TryGetValue(cz,{get:function(){return cB;},set:function(cC){cB=cC;}}),cB]);if(cA[0]){cy.SAdd(cz);cf.RemoveKey(cz);F.PrepareTemplateStrict(cc,{$:1,$0:cz},cA[1],{$:1,$0:cd});}else b_.warn(cy.Contains(cz)?"Encountered loop when instantiating "+cz:"Local template does not exist: "+cz);}}ce=F.LoadedTemplateFile(cc);cf=new I.New$5();cg=cb.querySelectorAll("[ws-template]");for(ch=0,ci=cg.length-1;ch<=ci;ch++){cj=cg[ch];ck=cj.getAttribute("ws-template").toLowerCase();cj.removeAttribute("ws-template");cf.set_Item(ck,F.FakeRootSingle(cj));}cl=cb.querySelectorAll("[ws-children-template]");for(cm=0,cn=cl.length-1;cm<=cn;cm++){co=cl[cm];cp=co.getAttribute("ws-children-template").toLowerCase();co.removeAttribute("ws-children-template");cf.set_Item(cp,F.FakeRoot(co));}cq=cb.querySelectorAll("template[id]");for(cr=0,cs=cq.length-1;cr<=cs;cr++){ct=cq[cr];cf.set_Item(ct.getAttribute("id").toLowerCase(),F.FakeRootFromHTMLTemplate(ct));}cu=cb.querySelectorAll("template[name]");for(cv=0,cw=cu.length-1;cv<=cw;cv++){cx=cu[cv];cf.set_Item(cx.getAttribute("name").toLowerCase(),F.FakeRootFromHTMLTemplate(cx));}cy=new O.New$3();while(cf.count>0)cd(P.head(cf.Keys()));};F.LoadedTemplates=function(){_.$cctor();return _.LoadedTemplates;};F.LoadedTemplateFile=function(cb){var cc,cd,ce;cc=(cd=null,[F.LoadedTemplates().TryGetValue(cb,{get:function(){return cd;},set:function(cf){cd=cf;}}),cd]);return cc[0]?cc[1]:(ce=new I.New$5(),(F.LoadedTemplates().set_Item(cb,ce),ce));};F.ChildrenTemplate=function(cb,cc){var cd,ce,cf,cg,ch;cd=F.InlineTemplate(cb,P.append(cc,F.GlobalHoles().Values()));ce=cd[1];cf=cd[0];cg=cf.Els;return!q.Equals(cg,null)&&cg.length===1&&(m.get(cg,0)instanceof J&&(q.Equals(m.get(cg,0).nodeType,J.ELEMENT_NODE)&&(ch=m.get(cg,0),true)))?bh.TreeNode(cf,ce):G.Mk({$:6,$0:cf},ce);};F.FakeRootSingle=function(cb){var cc,cd,ce,cf;cb.removeAttribute("ws-template");cc=cb.getAttribute("ws-replace");if(cc==null);else{cb.removeAttribute("ws-replace");cd=cb.parentNode;q.Equals(cd,null)?void 0:(ce=self.document.createElement(cb.tagName),ce.setAttribute("ws-replace",cc),cd.replaceChild(ce,cb));}cf=self.document.createElement("div");cf.appendChild(cb);return cf;};F.FakeRoot=function(cb){var cc;cc=self.document.createElement("div");while(cb.hasChildNodes())cc.appendChild(cb.firstChild);return cc;};F.FakeRootFromHTMLTemplate=function(cb){var cc,cd,ce,cf;cc=self.document.createElement("div");cd=cb.content;for(ce=0,cf=cd.childNodes.length-1;ce<=cf;ce++)cc.appendChild(cd.childNodes[ce].cloneNode(true));return cc;};F.PrepareTemplateStrict=function(cb,cc,cd,ce){var cf,cg;function ch(cn,co){var cp,cq,cr,cs,ct,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP;function cu(cQ){}while(true)switch(cn){case 0:if(co!==null){cp=co.nextSibling;if(q.Equals(co.nodeType,J.TEXT_NODE))bj.convertTextNode(co);else if(q.Equals(co.nodeType,J.ELEMENT_NODE))cj(co);co=cp;}else return null;break;case 1:cv=bk.string(co.nodeName,{$:1,$0:3},null).toLowerCase();cw=(cq=cv.indexOf("."),cq===-1?[cb,cv]:[bk.string(cv,null,{$:1,$0:cq-1}),bk.string(cv,{$:1,$0:cq+1},null)]);cx=cw[1];cy=cw[0];if(cy!=""&&!F.LoadedTemplates().ContainsKey(cy))return bj.failNotLoaded(cx);else{if(cy==""&&ce!=null)ce.$0(cx);cz=F.LoadedTemplates().Item(cy);if(!cz.ContainsKey(cx))return bj.failNotLoaded(cx);else{cA=cz.Item(cx);cB=cA.cloneNode(true);cC=new O.New$3();cD=new I.New$5();cE=co.attributes;for(cF=0,cG=cE.length-1;cF<=cG;cF++){cH=cE.item(cF).name.toLowerCase();cD.set_Item(cH,(cI=cE.item(cF).nodeValue,cI==""?cH:cI.toLowerCase()));if(!cC.SAdd(cH))b_.warn("Hole mapped twice",cH);}for(cJ=0,cK=co.childNodes.length-1;cJ<=cK;cJ++){cL=co.childNodes[cJ];if(q.Equals(cL.nodeType,J.ELEMENT_NODE))!cC.SAdd(cL.nodeName.toLowerCase())?b_.warn("Hole filled twice",cx):void 0;}cM=co.childNodes.length===1&&q.Equals(co.firstChild.nodeType,J.TEXT_NODE);if(cM){cs=bj.fillTextHole(cB,co.firstChild.textContent,cx);((function(cQ){return function(cR){if(cR!=null)cQ(cR.$0);};}((ct=function(cQ){return function(cR){return cQ.SAdd(cR);};}(cC),function(cQ){return cu(ct(cQ));})))(cs));}bj.removeHolesExcept(cB,cC);if(!cM){for(cN=0,cO=co.childNodes.length-1;cN<=cO;cN++){cP=co.childNodes[cN];if(q.Equals(cP.nodeType,J.ELEMENT_NODE))cP.hasAttributes()?bj.fillInstanceAttrs(cB,cP):ci(cB,cP);}}bj.mapHoles(cB,cD);bj.fill(cB,co.parentNode,co);co.parentNode.removeChild(co);return;}}break;}}function ci(cn,co){var cp,cq,cs,ct;function cr(cu,cv){var cw;if(cs=="title"&&co.hasChildNodes()){cw=bl.ParseHTMLIntoFakeRoot(co.textContent);co.removeChild(co.firstChild);while(cw.hasChildNodes())co.appendChild(cw.firstChild);}else null;cj(co);return bj.fill(co,cu,cv);}cs=co.nodeName.toLowerCase();F.foreachNotPreserved(cn,"[ws-attr-holes]",function(cu){var cv,cw,cx,cy,cz;cv=bD.SplitChars(cu.getAttribute("ws-attr-holes"),[" "],1);for(cw=0,cx=cv.length-1;cw<=cx;cw++){cy=m.get(cv,cw);cu.setAttribute(cy,(cz=new a.RegExp("\\${"+cs+"}","ig"),cu.getAttribute(cy).replace(cz,co.textContent)));}});ct=cn.querySelector("[ws-hole="+cs+"]");if(q.Equals(ct,null)){cp=cn.querySelector("[ws-replace="+cs+"]");return q.Equals(cp,null)?(cq=cn.querySelector("slot[name="+cs+"]"),cn.tagName.toLowerCase()=="template"?(cr(cq.parentNode,cq),void cq.parentNode.removeChild(cq)):null):(cr(cp.parentNode,cp),void cp.parentNode.removeChild(cp));}else{while(ct.hasChildNodes())ct.removeChild(ct.lastChild);ct.removeAttribute("ws-hole");return cr(ct,null);}}function cj(cn){if(!cn.hasAttribute("ws-preserve"))if(bD.StartsWith(cn.nodeName.toLowerCase(),"ws-"))cl(cn);else{bj.convertAttrs(cn);ck(cn.firstChild);}}function ck(cn){return ch(0,cn);}function cl(cn){return ch(1,cn);}function cm(cn){var co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz;while(true){co=cn.querySelector("[ws-template]");if(q.Equals(co,null)){cp=cn.querySelector("[ws-children-template]");if(q.Equals(cp,null)){cq=cn.querySelectorAll("template[id]");for(cr=1,cs=cq.length-1;cr<=cs;cr++){ct=cq[cr];if(cf.Contains(ct));else{F.PrepareTemplateStrict(cb,{$:1,$0:ct.getAttribute("id")},ct,null);cf.SAdd(ct);}}cu=cn.querySelectorAll("template[name]");for(cv=1,cw=cu.length-1;cv<=cw;cv++){cx=cu[cv];if(cf.Contains(cx));else{F.PrepareTemplateStrict(cb,{$:1,$0:cx.getAttribute("name")},cx,null);cf.SAdd(cx);}}return null;}else{cy=cp.getAttribute("ws-children-template");cp.removeAttribute("ws-children-template");F.PrepareTemplateStrict(cb,{$:1,$0:cy},cp,null);cn=cn;}}else{cz=co.getAttribute("ws-template");(F.PrepareSingleTemplate(cb,{$:1,$0:cz},co))(null);cn=cn;}}}cf=new O.New$3();cg=(cc==null?"":cc.$0).toLowerCase();F.LoadedTemplateFile(cb).set_Item(cg,cd);if(cd.hasChildNodes()){cm(cd);ck(cd.firstChild);}};F.InlineTemplate=function(cb,cc){var cd,ce,cf,cg,ch,cl,cm,cn,co,cp,cq,cr;function ci(cs,ct){var cu,cv,cw;cu=bs.Insert(cs,ct);cm.push(bs.Updates(cu));cn.push([cs,cu]);cv=b9.GetOptional(cu.OnAfterRender);return cv==null?null:(cw=cv.$0,void co.push(function(){cw(cs);}));}function cj(cs){var ct,cu,cv,cw;ct=(cu=null,[cp.TryGetValue(cs,{get:function(){return cu;},set:function(cx){cu=cx;}}),cu]);return ct[0]?(cv=ct[1],cv instanceof bt?{$:1,$0:cv.get_Value()}:cv instanceof bu?{$:1,$0:G.TextNode(cv.get_Value())}:(cw=cv.ForTextView(),cw==null?null:{$:1,$0:G.TextView(cw.$0)})):null;}function ck(){F.foreachNotPreservedwsDOM("[ws-dom]",function(cs){var ct,cu,cv,cw,cx,cy,cz;ct=(cu=null,[cp.TryGetValue(cs.getAttribute("ws-dom").toLowerCase(),{get:function(){return cu;},set:function(cA){cu=cA;}}),cu]);if(ct[0]){cv=ct[1];cv instanceof X?(cw=cv.get_Value(),cs.removeAttribute("ws-dom"),cx=cs,cy=new a.MutationObserver(function(cA,cB){m.iter(function(cC){function cD(cE,cF,cG,cH){if(cE===cx&&cC.addedNodes.length!==1){cw.SetFinal(null);cB.disconnect();}}cC.removedNodes.forEach(b9.CreateFuncWithArgs(function(cE){return cD(cE[0],cE[1],cE[2],cE[3]);}),null);},cA);}),cs.parentElement!==null?cy.observe(cs.parentElement,(cz={},cz.childList=true,cz)):void 0,cw.Set({$:1,$0:cs}),Y.Sink(function(cA){var cB;if(cA!=null&&cA.$==1){cB=cA.$0;if(cx===cB);else{cx.replaceWith.apply(cx,[cB]);cx=cB;}}else{cx.remove();cy.disconnect();}},cw.get_View())):void 0;}});}cl=[];cm=[];cn=[];co=[];cp=new I.New$5();cq=_7.Get(cc);try{while(cq.MoveNext()){cr=cq.Current();cp.set_Item(cr.get_Name(),cr);}}finally{if(typeof cq=="object"&&"Dispose"in cq)cq.Dispose();}cd=bl.ChildrenArray(cb);F.foreachNotPreserved(cb,"[ws-hole]",function(cs){var ct,cu,cv;cv=cs.getAttribute("ws-hole");cs.removeAttribute("ws-hole");while(cs.hasChildNodes())cs.removeChild(cs.lastChild);ct=cj(cv);if(ct!=null&&ct.$==1){cu=ct.$0;$.LinkElement(cs,cu.docNode);cl.push(ba.New(bs.Empty(cs),cu.docNode,null,cs,bd.Int(),null));cm.push(cu.updates);}});F.foreachNotPreserved(cb,"[ws-replace]",function(cs){var ct,cu,cv,cw,cx,cy;ct=cj(cs.getAttribute("ws-replace"));if(ct!=null&&ct.$==1){cu=ct.$0;cv=cs.parentNode;cw=self.document.createTextNode("");cv.replaceChild(cw,cs);cx=$.InsertBeforeDelim(cw,cu.docNode);cy=m.tryFindIndex(function(cz){return cs===cz;},cd);cy==null?void 0:m.set(cd,cy.$0,cu.docNode);cl.push(ba.New(bs.Empty(cv),cu.docNode,{$:1,$0:[cx,cw]},cv,bd.Int(),null));cm.push(cu.updates);}});ce=false;F.foreachNotPreserved(cb,"slot",function(cs){var ct,cu,cv,cw;cv=cs.getAttribute("name");cw=cv==""||cv==null?"default":cv.toLowerCase();if(ce&&cw=="default"||!q.Equals(cb.parentElement,null))void 0;else{while(cs.hasChildNodes())cs.removeChild(cs.lastChild);if(cw=="default")ce=true;ct=cj(cw);if(ct!=null&&ct.$==1){cu=ct.$0;$.LinkElement(cs,cu.docNode);cl.push(ba.New(bs.Empty(cs),cu.docNode,null,cs,bd.Int(),null));cm.push(cu.updates);}}});F.foreachNotPreserved(cb,"[ws-attr]",function(cs){var ct,cu,cv,cw;ct=cs.getAttribute("ws-attr");cs.removeAttribute("ws-attr");cu=(cv=null,[cp.TryGetValue(ct,{get:function(){return cv;},set:function(cx){cv=cx;}}),cv]);if(cu[0]){cw=cu[1];cw instanceof bv?ci(cs,cw.get_Value()):b_.warn("Attribute hole filled with non-attribute data",ct);}});F.foreachNotPreserved(cb,"[ws-on]",function(cs){ci(cs,by.Concat(m.choose(function(ct){var cu,cv,cw,cx;cu=bD.SplitChars(ct,[":"],1);cv=(cw=null,[cp.TryGetValue(m.get(cu,1),{get:function(){return cw;},set:function(cy){cw=cy;}}),cw]);return cv[0]?(cx=cv[1],cx instanceof bw?{$:1,$0:bx.Handler(m.get(cu,0),cx.get_Value())}:cx instanceof y?{$:1,$0:by.Handler(m.get(cu,0),cx.get_Value())}:(b_.warn("Event hole on"+m.get(cu,0)+" filled with non-event data",m.get(cu,1)),null)):null;},bD.SplitChars(cs.getAttribute("ws-on"),[" "],1))));cs.removeAttribute("ws-on");});F.foreachNotPreserved(cb,"[ws-onafterrender]",function(cs){var ct,cu,cv,cw;ct=cs.getAttribute("ws-onafterrender");cu=(cv=null,[cp.TryGetValue(ct,{get:function(){return cv;},set:function(cx){cv=cx;}}),cv]);if(cu[0]){cw=cu[1];cw instanceof bz?(cs.removeAttribute("ws-onafterrender"),ci(cs,bx.OnAfterRender(cw.get_Value()))):cw instanceof bA?(cs.removeAttribute("ws-onafterrender"),ci(cs,bx.OnAfterRender(cw.get_Value()))):b_.warn("onafterrender hole filled with non-onafterrender data",ct);}});F.foreachNotPreserved(cb,"[ws-var]",function(cs){var ct,cu,cv;ct=cs.getAttribute("ws-var");cs.removeAttribute("ws-var");cu=(cv=null,[cp.TryGetValue(ct,{get:function(){return cv;},set:function(cw){cv=cw;}}),cv]);if(cu[0])cu[1].AddAttribute(function(cw){return function(cx){return ci(cw,cx);};},cs);});F.foreachNotPreserved(cb,"[ws-attr-holes]",function(cs){var ct,cu,cv,cw;ct=new a.RegExp(F.TextHoleRE(),"g");cu=bD.SplitChars(cs.getAttribute("ws-attr-holes"),[" "],1);cs.removeAttribute("ws-attr-holes");for(cv=0,cw=cu.length-1;cv<=cw;cv++)(function(){var cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ;cG=m.get(cu,cv);cH=cs.getAttribute(cG);cx=null;cy=0;cI=[];while(cx=ct.exec(cH),cx!==null){cJ=bk.string(cH,{$:1,$0:cy},{$:1,$0:ct.lastIndex-m.get(cx,0).length-1});cy=ct.lastIndex;cI.push([cJ,m.get(cx,1)]);}cA=bk.string(cH,{$:1,$0:cy},null);ct.lastIndex=0;cB=m.foldBack(function(cK,cL){return(function(cM){var cN,cO;cN=cM[0];cO=cM[1];return function(cP){var cQ,cR,cS,cT,cU;cQ=cP[0];cR=cP[1];cS=(cT=(cU=null,[cp.TryGetValue(cO,{get:function(){return cU;},set:function(cV){cU=cV;}}),cU]),cT[0]?cT[1].get_AsChoiceView():{$:0,$0:""});return cS.$==1?[cN,new bC({$:1,$0:cQ==""?cS.$0:Y.Map(function(cV){return cV+cQ;},cS.$0),$1:cR})]:[cN+cS.$0+cQ,cR];};}(cK))(cL);},cI,[cA,bC.Empty]);return ci(cs,cB[1].$==1?cB[1].$1.$==1?cB[1].$1.$1.$==1?cB[1].$1.$1.$1.$==0?(cC=cB[0],bx.Dynamic(cG,Y.Map3(function(cK,cL,cM){return cC+cK+cL+cM;},cB[1].$0,cB[1].$1.$0,cB[1].$1.$1.$0))):(cD=cB[0],bx.Dynamic(cG,Y.Map(function(cK){return cD+bD.concat("",cK);},Y.Sequence(cB[1])))):(cE=cB[0],bx.Dynamic(cG,Y.Map2(function(cK,cL){return cE+cK+cL;},cB[1].$0,cB[1].$1.$0))):cB[0]==""?bx.Dynamic(cG,cB[1].$0):(cF=cB[0],bx.Dynamic(cG,Y.Map(function(cK){return cF+cK;},cB[1].$0))):by.Create(cG,cB[0]));}());});return[b9.DeleteEmptyFields({Els:cd,Dirty:true,Holes:cl,Attrs:cn,Render:(cf=co.length==0?{$:1,$0:function(){ck();}}:{$:1,$0:function(cs){ck();m.iter(function(ct){ct(cs);},co);}},cf?cf.$0:void 0),El:(cg=!q.Equals(cd,null)&&cd.length===1&&(m.get(cd,0)instanceof J&&(m.get(cd,0)instanceof bi&&(ch=m.get(cd,0),true)))?{$:1,$0:ch}:null,cg?cg.$0:void 0)},["Render","El"]),bE.TreeReduce(Y.Const(),Y.Map2Unit,cm)];};F.GlobalHoles=function(){_.$cctor();return _.GlobalHoles;};F.foreachNotPreserved=function(cb,cc,cd){bl.IterSelector(cb,cc,function(ce){if(ce.closest("[ws-preserve]")==null)cd(ce);});};F.PrepareSingleTemplate=function(cb,cc,cd){var ce;ce=F.FakeRootSingle(cd);return function(cf){F.PrepareTemplateStrict(cb,cc,ce,cf);};};F.foreachNotPreservedwsDOM=function(cb,cc){bl.IterSelectorDoc(cb,function(cd){if(cd.closest("[ws-preserve]")==null)cc(cd);});};F.TextHoleRE=function(){_.$cctor();return _.TextHoleRE;};G=h.Doc=b9.Class({},g,G);G.RunById=function(cb,cc){var cd;cd=self.document.getElementById(cb);if(q.Equals(cd,null))f.FailWith("invalid id: "+cb);else G.Run(cd,cc);};G.Run=function(cb,cc){$.LinkElement(cb,cc.docNode);G.RunInPlace(false,cb,cc);};G.get_Empty=function(){return G.Mk(null,Y.Const());};G.RunInPlace=function(cb,cc,cd){var ce;ce=$.CreateRunState(cc,cd.docNode);Y.Sink(bn.get_UseAnimations()||bo.BatchUpdatesEnabled()?bp.StartProcessor($.PerformAnimatedUpdate(cb,ce,cd.docNode)):function(){$.PerformSyncUpdate(cb,ce,cd.docNode);},cd.updates);};G.Mk=function(cb,cc){return new G.New(cb,cc);};G.TextNode=function(cb){return G.Mk({$:5,$0:self.document.createTextNode(cb)},Y.Const());};G.TextView=function(cb){var cc;cc=$.CreateTextNode();return G.Mk({$:4,$0:cc},Y.Map(function(cd){$.UpdateTextNode(cc,cd);},cb));};G.New=b9.Ctor(function(cb,cc){g.New.call(this);this.docNode=cb;this.updates=cc;},G);I=H.Dictionary=b9.Class({set_Item:function(cb,cc){this.set(cb,cc);},set:function(cb,cc){var cd,ce,cf,cg;cd=this;ce=this.hash(cb);cf=this.data[ce];if(cf==null){this.count=this.count+1;this.data[ce]=new a.Array({K:cb,V:cc});}else{cg=m.tryFindIndex(function(ch){return cd.equals.apply(null,[(f.KeyValue(ch))[0],cb]);},cf);cg==null?(this.count=this.count+1,cf.push({K:cb,V:cc})):cf[cg.$0]={K:cb,V:cc};}},TryGetValue:function(cb,cc){var cd,ce,cf;cd=this;ce=this.data[this.hash(cb)];return ce==null?false:(cf=m.tryPick(function(cg){var ch;ch=f.KeyValue(cg);return cd.equals.apply(null,[ch[0],cb])?{$:1,$0:ch[1]}:null;},ce),cf!=null&&cf.$==1&&(cc.set(cf.$0),true));},ContainsKey:function(cb){var cc,cd;cc=this;cd=this.data[this.hash(cb)];return cd==null?false:m.exists(function(ce){return cc.equals.apply(null,[(f.KeyValue(ce))[0],cb]);},cd);},RemoveKey:function(cb){return this.remove(cb);},Keys:function(){return new bm.New(this);},GetEnumerator:function(){return _7.Get0(m.concat(W.GetFieldValues(this.data)));},Values:function(){return new bG.New(this);},remove:function(cb){var cc,cd,ce,cf;cc=this;cd=this.hash(cb);ce=this.data[cd];return ce==null?false:(cf=m.filter(function(cg){return!cc.equals.apply(null,[(f.KeyValue(cg))[0],cb]);},ce),m.length(cf)<ce.length&&(this.count=this.count-1,this.data[cd]=cf,true));},Item:function(cb){return this.get(cb);},get:function(cb){var cc,cd;cc=this;cd=this.data[this.hash(cb)];return cd==null?_6.notPresent():m.pick(function(ce){var cf;cf=f.KeyValue(ce);return cc.equals.apply(null,[cf[0],cb])?{$:1,$0:cf[1]}:null;},cd);}},g,I);I.New$5=b9.Ctor(function(){I.New$6.call(this,[],q.Equals,q.Hash);},I);I.New$6=b9.Ctor(function(cb,cc,cd){var ce,cf;g.New.call(this);this.equals=cc;this.hash=cd;this.count=0;this.data=[];ce=_7.Get(cb);try{while(ce.MoveNext()){cf=ce.Current();this.set(cf.K,cf.V);}}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}},I);K=h.Var$1=b9.Class({},g,K);K.Create$1=function(cb){return new _0.New(false,_1.New({$:2,$0:cb,$1:[]}),cb);};M.New=function(cb,cc){return{k:cb,ct:cc};};N.New=function(cb,cc){return{c:cb,r:cc};};O=H.HashSet=b9.Class({SAdd:function(cb){return this.add(cb);},Contains:function(cb){var cc;cc=this.data[this.hash(cb)];return cc==null?false:this.arrContains(cb,cc);},add:function(cb){var cc,cd;cc=this.hash(cb);cd=this.data[cc];return cd==null?(this.data[cc]=[cb],this.count=this.count+1,true):this.arrContains(cb,cd)?false:(cd.push(cb),this.count=this.count+1,true);},arrContains:function(cb,cc){var cd,ce,cf,cg;cd=true;ce=0;cg=cc.length;while(cd&&ce<cg)if(this.equals.apply(null,[cc[ce],cb]))cd=false;else ce=ce+1;return!cd;},GetEnumerator:function(){return _7.Get(bM.concat(this.data));},ExceptWith:function(cb){var cc;cc=_7.Get(cb);try{while(cc.MoveNext())this.Remove(cc.Current());}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}},Count:function(){return this.count;},IntersectWith:function(cb){var cc,cd,ce,cf,cg;cc=new O.New$4(cb,this.equals,this.hash);cd=bM.concat(this.data);for(ce=0,cf=cd.length-1;ce<=cf;ce++){cg=cd[ce];if(!cc.Contains(cg))this.Remove(cg);}},Remove:function(cb){var cc;cc=this.data[this.hash(cb)];return cc==null?false:this.arrRemove(cb,cc)&&(this.count=this.count-1,true);},CopyTo:function(cb,cc){var cd,ce,cf;cd=bM.concat(this.data);for(ce=0,cf=cd.length-1;ce<=cf;ce++)m.set(cb,ce+cc,cd[ce]);},arrRemove:function(cb,cc){var cd,ce,cf,cg;cd=true;ce=0;cg=cc.length;while(cd&&ce<cg)if(this.equals.apply(null,[cc[ce],cb])){cc.splice.apply(cc,[ce,1]);cd=false;}else ce=ce+1;return!cd;}},g,O);O.New$3=b9.Ctor(function(){O.New$4.call(this,[],q.Equals,q.Hash);},O);O.New$4=b9.Ctor(function(cb,cc,cd){var ce;g.New.call(this);this.equals=cc;this.hash=cd;this.data=[];this.count=0;ce=_7.Get(cb);try{while(ce.MoveNext())this.add(ce.Current());}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}},O);O.New$2=b9.Ctor(function(cb){O.New$4.call(this,cb,q.Equals,q.Hash);},O);P.append=function(cb,cc){return{GetEnumerator:function(){var cd,ce;cd=_7.Get(cb);ce=[true];return new _8.New(cd,null,function(cf){var cg;return cf.s.MoveNext()?(cf.c=cf.s.Current(),true):(cg=cf.s,!q.Equals(cg,null)?cg.Dispose():void 0,cf.s=null,ce[0]&&(ce[0]=false,cf.s=_7.Get(cc),cf.s.MoveNext()?(cf.c=cf.s.Current(),true):(cf.s.Dispose(),cf.s=null,false)));},function(cf){var cg;cg=cf.s;if(!q.Equals(cg,null))cg.Dispose();});}};};P.head=function(cb){var cc;cc=_7.Get(cb);try{return cc.MoveNext()?cc.Current():P.insufficient();}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};P.fold=function(cb,cc,cd){var ce,cf;ce=cc;cf=_7.Get(cd);try{while(cf.MoveNext())ce=cb(ce,cf.Current());return ce;}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}};P.iter=function(cb,cc){var cd;cd=_7.Get(cc);try{while(cd.MoveNext())cb(cd.Current());}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};P.map=function(cb,cc){return{GetEnumerator:function(){var cd;cd=_7.Get(cc);return new _8.New(null,null,function(ce){return cd.MoveNext()&&(ce.c=cb(cd.Current()),true);},function(){cd.Dispose();});}};};P.delay=function(cb){return{GetEnumerator:function(){return _7.Get(cb());}};};P.max=function(cb){var cc,cd,ce;cc=_7.Get(cb);try{if(!cc.MoveNext())P.seqEmpty();cd=cc.Current();while(cc.MoveNext()){ce=cc.Current();if(q.Compare(ce,cd)===1)cd=ce;}return cd;}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};P.init=function(cb,cc){return P.take(cb,P.initInfinite(cc));};P.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};P.forall=function(cb,cc){return!P.exists(function(cd){return!cb(cd);},cc);};P.take=function(cb,cc){cb<0?P.nonNegative():void 0;return{GetEnumerator:function(){var cd;cd=[_7.Get(cc)];return new _8.New(0,null,function(ce){var cf;ce.s=ce.s+1;return ce.s>cb?false:(cf=cd[0],q.Equals(cf,null)?P.insufficient():cf.MoveNext()?(ce.c=cf.Current(),ce.s===cb?(cf.Dispose(),cd[0]=null):void 0,true):(cf.Dispose(),cd[0]=null,P.insufficient()));},function(){var ce;ce=cd[0];if(!q.Equals(ce,null))ce.Dispose();});}};};P.initInfinite=function(cb){return{GetEnumerator:function(){return new _8.New(0,null,function(cc){cc.c=cb(cc.s);cc.s=cc.s+1;return true;},void 0);}};};P.exists=function(cb,cc){var cd,ce;cd=_7.Get(cc);try{ce=false;while(!ce&&cd.MoveNext())ce=cb(cd.Current());return ce;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};m.choose=function(cb,cc){var cd,ce,cf,cg;cd=[];for(ce=0,cf=cc.length-1;ce<=cf;ce++){cg=cb(cc[ce]);if(cg==null);else cd.push(cg.$0);}return cd;};m.tryFindIndex=function(cb,cc){var cd,ce;cd=null;ce=0;while(ce<cc.length&&cd==null){cb(cc[ce])?cd={$:1,$0:ce}:void 0;ce=ce+1;}return cd;};m.tryPick=function(cb,cc){var cd,ce,cf;cd=null;ce=0;while(ce<cc.length&&cd==null){cf=cb(cc[ce]);if(cf!=null&&cf.$==1)cd=cf;ce=ce+1;}return cd;};m.exists=function(cb,cc){var cd,ce,cf,cg;cd=false;ce=0;cg=m.length(cc);while(!cd&&ce<cg)if(cb(cc[ce]))cd=true;else ce=ce+1;return cd;};m.concat=function(cb){return a.Array.prototype.concat.apply([],m.ofSeq(cb));};m.iter=function(cb,cc){var cd,ce;for(cd=0,ce=cc.length-1;cd<=ce;cd++)cb(cc[cd]);};m.foldBack=function(cb,cc,cd){var ce,cf,cg,ch,ci;ce=cd;cg=cc.length;for(ch=1,ci=cg;ch<=ci;ch++)ce=cb(cc[cg-ch],ce);return ce;};m.map=function(cb,cc){var cd,ce,cf;cd=new a.Array(cc.length);for(ce=0,cf=cc.length-1;ce<=cf;ce++)cd[ce]=cb(cc[ce]);return cd;};m.filter=function(cb,cc){var cd,ce,cf;cd=[];for(ce=0,cf=cc.length-1;ce<=cf;ce++)if(cb(cc[ce]))cd.push(cc[ce]);return cd;};m.ofSeq=function(cb){var cc,cd;if(cb instanceof a.Array)return cb.slice();else if(cb instanceof bC)return m.ofList(cb);else{cc=[];cd=_7.Get(cb);try{while(cd.MoveNext())cc.push(cd.Current());return cc;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}}};m.pick=function(cb,cc){var cd;cd=m.tryPick(cb,cc);return cd==null?f.FailWith("KeyNotFoundException"):cd.$0;};m.ofList=function(cb){var cc,cd;cd=[];cc=cb;while(!(cc.$==0)){cd.push(bB.head(cc));cc=bB.tail(cc);}return cd;};m.forall=function(cb,cc){var cd,ce,cf,cg;cd=true;ce=0;cg=m.length(cc);while(cd&&ce<cg)if(cb(cc[ce]))ce=ce+1;else cd=false;return cd;};m.create=function(cb,cc){var cd,ce,cf;cd=new a.Array(cb);for(ce=0,cf=cb-1;ce<=cf;ce++)cd[ce]=cc;return cd;};m.init=function(cb,cc){var cd,ce,cf;if(cb<0)f.FailWith("Negative size given.");else null;cd=new a.Array(cb);for(ce=0,cf=cb-1;ce<=cf;ce++)cd[ce]=cc(ce);return cd;};Q.$cctor=function(){Q.$cctor=a.ignore;Q.initialized=new I.New$5();};Q=k.TemplateInitializer=b9.Class({},g,Q);Q.GetOrAddHoleFor=function(cb,cc,cd){var ce,cf,cg,ch;Q.$cctor();ce=Q.GetHolesFor(cb);cf=(cg=null,[ce.TryGetValue(cc,{get:function(){return cg;},set:function(ci){cg=ci;}}),cg]);return cf[0]?cf[1]:(ch=cd(),(ce.set_Item(cc,ch),ch));};Q.GetHolesFor=function(cb){var cc,cd,ce;Q.$cctor();cc=(cd=null,[Q.initialized.TryGetValue(cb,{get:function(){return cd;},set:function(cf){cd=cf;}}),cd]);return cc[0]?cc[1]:(ce=new I.New$5(),(Q.initialized.set_Item(cb,ce),ce));};R=t.VarStr=b9.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith.get_View()};},AddAttribute:function(cb,cc){(cb(cc))(bx.Value(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:Y.Map(a.String,this.fillWith.get_View())};}},s,R);R.New=b9.Ctor(function(cb,cc){s.New.call(this);this.name=cb;this.fillWith=cc;},R);S=t.VarFloatUnchecked=b9.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:Y.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(cb,cc){(cb(cc))(bx.FloatValueUnchecked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:Y.Map(a.String,this.fillWith.get_View())};}},s,S);S.New=b9.Ctor(function(cb,cc){s.New.call(this);this.name=cb;this.fillWith=cc;},S);T=t.VarBool=b9.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:Y.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(cb,cc){(cb(cc))(bx.Checked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:Y.Map(a.String,this.fillWith.get_View())};}},s,T);T.New=b9.Ctor(function(cb,cc){s.New.call(this);this.name=cb;this.fillWith=cc;},T);U=t.VarDateTime=b9.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:Y.Map(function(cb){return(new a.Date(cb)).toLocaleString();},this.fillWith.get_View())};},AddAttribute:function(cb,cc){(cb(cc))(bx.DateTimeValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:Y.Map(function(cb){return(new a.Date(cb)).toLocaleString();},this.fillWith.get_View())};}},s,U);U.New=b9.Ctor(function(cb,cc){s.New.call(this);this.name=cb;this.fillWith=cc;},U);V=t.VarFile=b9.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:Y.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(cb,cc){(cb(cc))(bx.FileValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:Y.Map(a.String,this.fillWith.get_View())};}},s,V);V.New=b9.Ctor(function(cb,cc){s.New.call(this);this.name=cb;this.fillWith=cc;},V);W.GetFieldValues=function(cb){var cc,cd;cc=[];for(var ce in cb)cc.push(cb[ce]);return cc;};X=t.VarDomElement=b9.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},s,X);X.New=b9.Ctor(function(cb,cc){s.New.call(this);this.name=cb;this.fillWith=cc;},X);Y=h.View=b9.Class({},null,Y);Z.TryParseInt32=function(cb,cc){return Z.TryParse(cb,-2147483648,2147483647,cc);};_0=h.ConcreteVar=b9.Class({get_View:function(){return this.view;},Set:function(cb){if(this.isConst)(function(cc){return cc("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cc){b_.log(cc);}));else{_1.Obsolete(this.snap);this.current=cb;this.snap=_1.New({$:2,$0:cb,$1:[]});}},SetFinal:function(cb){if(this.isConst)(function(cc){return cc("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cc){b_.log(cc);}));else{_1.Obsolete(this.snap);this.isConst=true;this.current=cb;this.snap=_1.New({$:0,$0:cb});}},Get:function(){return this.current;},UpdateMaybe:function(cb){var cc;cc=cb(this.Get());if(cc!=null&&cc.$==1)this.Set(cc.$0);}},o,_0);_0.New=b9.Ctor(function(cb,cc,cd){var ce;ce=this;o.New.call(this);this.isConst=cb;this.current=cd;this.snap=cc;this.view=function(){return ce.snap;};this.id=bd.Int();},_0);_1.WhenRun=function(cb,cc,cd){var ce;ce=cb.s;if(ce==null)cd();else ce!=null&&ce.$==2?(ce.$1.push(cd),cc(ce.$0)):ce!=null&&ce.$==3?(ce.$0.push(cc),ce.$1.push(cd)):cc(ce.$0);};_1.Map=function(cb,cc){var cd,ce;cd=cc.s;return cd!=null&&cd.$==0?_1.New({$:0,$0:cb(cd.$0)}):(ce=_1.New({$:3,$0:[],$1:[]}),(_1.When(cc,function(cf){_1.MarkDone(ce,cc,cb(cf));},ce),ce));};_1.Map3=function(cb,cc,cd,ce){var cf,cg,ch,ci;function cj(ck){var cl,cm,cn,co;if(!(cl=ci.s,cl!=null&&cl.$==0||cl!=null&&cl.$==2)){cm=_1.ValueAndForever(cc);cn=_1.ValueAndForever(cd);co=_1.ValueAndForever(ce);if(cm!=null&&cm.$==1)cn!=null&&cn.$==1?co!=null&&co.$==1?cm.$0[1]&&cn.$0[1]&&co.$0[1]?_1.MarkForever(ci,cb(cm.$0[0],cn.$0[0],co.$0[0])):_1.MarkReady(ci,cb(cm.$0[0],cn.$0[0],co.$0[0])):void 0:void 0;}}cf=cc.s;cg=cd.s;ch=ce.s;return cf!=null&&cf.$==0?cg!=null&&cg.$==0?ch!=null&&ch.$==0?_1.New({$:0,$0:cb(cf.$0,cg.$0,ch.$0)}):_1.Map3Opt1(cb,cf.$0,cg.$0,ce):ch!=null&&ch.$==0?_1.Map3Opt2(cb,cf.$0,ch.$0,cd):_1.Map3Opt3(cb,cf.$0,cd,ce):cg!=null&&cg.$==0?ch!=null&&ch.$==0?_1.Map3Opt4(cb,cg.$0,ch.$0,cc):_1.Map3Opt5(cb,cg.$0,cc,ce):ch!=null&&ch.$==0?_1.Map3Opt6(cb,ch.$0,cc,cd):(ci=_1.New({$:3,$0:[],$1:[]}),(_1.When(cc,cj,ci),_1.When(cd,cj,ci),_1.When(ce,cj,ci),ci));};_1.Sequence=function(cb){var cc,cd,ce;function cf(cg){var ch;if(ce[0]===0){ch=m.map(function(ci){var cj;cj=ci.s;return cj!=null&&cj.$==0?cj.$0:cj!=null&&cj.$==2?cj.$0:f.FailWith("value not found by View.Sequence");},cc);if(m.forall(function(ci){var cj;cj=ci.s;return cj!=null&&cj.$==0;},cc))_1.MarkForever(cd,ch);else _1.MarkReady(cd,ch);}else ce[0]=ce[0]-1;}cc=m.ofSeq(cb);return cc.length==0?_1.New({$:0,$0:[]}):(cd=_1.New({$:3,$0:[],$1:[]}),(ce=[m.length(cc)-1],(m.iter(function(cg){_1.When(cg,cf,cd);},cc),cd)));};_1.Map2=function(cb,cc,cd){var ce,cf,cg;function ch(ci){var cj,ck,cl;if(!(cj=cg.s,cj!=null&&cj.$==0||cj!=null&&cj.$==2)){ck=_1.ValueAndForever(cc);cl=_1.ValueAndForever(cd);if(ck!=null&&ck.$==1)cl!=null&&cl.$==1?ck.$0[1]&&cl.$0[1]?_1.MarkForever(cg,cb(ck.$0[0],cl.$0[0])):_1.MarkReady(cg,cb(ck.$0[0],cl.$0[0])):void 0;}}ce=cc.s;cf=cd.s;return ce!=null&&ce.$==0?cf!=null&&cf.$==0?_1.New({$:0,$0:cb(ce.$0,cf.$0)}):_1.Map2Opt1(cb,ce.$0,cd):cf!=null&&cf.$==0?_1.Map2Opt2(cb,cf.$0,cc):(cg=_1.New({$:3,$0:[],$1:[]}),(_1.When(cc,ch,cg),_1.When(cd,ch,cg),cg));};_1.Map2Unit=function(cb,cc){var cd,ce,cf;function cg(){var ch,ci,cj;if(!(ch=cf.s,ch!=null&&ch.$==0||ch!=null&&ch.$==2)){ci=_1.ValueAndForever(cb);cj=_1.ValueAndForever(cc);if(ci!=null&&ci.$==1)cj!=null&&cj.$==1?ci.$0[1]&&cj.$0[1]?_1.MarkForever(cf,null):_1.MarkReady(cf,null):void 0;}}cd=cb.s;ce=cc.s;return cd!=null&&cd.$==0?ce!=null&&ce.$==0?_1.New({$:0,$0:null}):cc:ce!=null&&ce.$==0?cb:(cf=_1.New({$:3,$0:[],$1:[]}),(_1.When(cb,cg,cf),_1.When(cc,cg,cf),cf));};_1.Copy=function(cb){var cc,cd,ce;cc=cb.s;return cc==null?cb:cc!=null&&cc.$==2?(cd=_1.New({$:2,$0:cc.$0,$1:[]}),(_1.WhenObsolete(cb,cd),cd)):cc!=null&&cc.$==3?(ce=_1.New({$:3,$0:[],$1:[]}),(_1.When(cb,function(cf){_1.MarkDone(ce,cb,cf);},ce),ce)):cb;};_1.WhenObsoleteRun=function(cb,cc){var cd;cd=cb.s;if(cd==null)cc();else cd!=null&&cd.$==2?cd.$1.push(cc):cd!=null&&cd.$==3?cd.$1.push(cc):void 0;};_1.When=function(cb,cc,cd){var ce;ce=cb.s;if(ce==null)_1.Obsolete(cd);else ce!=null&&ce.$==2?(_1.EnqueueSafe(ce.$1,cd),cc(ce.$0)):ce!=null&&ce.$==3?(ce.$0.push(cc),_1.EnqueueSafe(ce.$1,cd)):cc(ce.$0);};_1.MarkDone=function(cb,cc,cd){var ce;if(ce=cc.s,ce!=null&&ce.$==0)_1.MarkForever(cb,cd);else _1.MarkReady(cb,cd);};_1.Map3Opt1=function(cb,cc,cd,ce){return _1.Map(function(cf){return cb(cc,cd,cf);},ce);};_1.Map3Opt2=function(cb,cc,cd,ce){return _1.Map(function(cf){return cb(cc,cf,cd);},ce);};_1.Map3Opt3=function(cb,cc,cd,ce){return _1.Map2(function(cf,cg){return cb(cc,cf,cg);},cd,ce);};_1.Map3Opt4=function(cb,cc,cd,ce){return _1.Map(function(cf){return cb(cf,cc,cd);},ce);};_1.Map3Opt5=function(cb,cc,cd,ce){return _1.Map2(function(cf,cg){return cb(cf,cc,cg);},cd,ce);};_1.Map3Opt6=function(cb,cc,cd,ce){return _1.Map2(function(cf,cg){return cb(cf,cg,cc);},cd,ce);};_1.ValueAndForever=function(cb){var cc;cc=cb.s;return cc!=null&&cc.$==0?{$:1,$0:[cc.$0,true]}:cc!=null&&cc.$==2?{$:1,$0:[cc.$0,false]}:null;};_1.MarkForever=function(cb,cc){var cd,ce,cf,cg;cd=cb.s;if(cd!=null&&cd.$==3){cb.s={$:0,$0:cc};ce=cd.$0;for(cf=0,cg=m.length(ce)-1;cf<=cg;cf++)(m.get(ce,cf))(cc);}else void 0;};_1.MarkReady=function(cb,cc){var cd,ce,cf,cg;cd=cb.s;if(cd!=null&&cd.$==3){cb.s={$:2,$0:cc,$1:cd.$1};ce=cd.$0;for(cf=0,cg=m.length(ce)-1;cf<=cg;cf++)(m.get(ce,cf))(cc);}else void 0;};_1.Map2Opt1=function(cb,cc,cd){return _1.Map(function(ce){return cb(cc,ce);},cd);};_1.Map2Opt2=function(cb,cc,cd){return _1.Map(function(ce){return cb(ce,cc);},cd);};_1.WhenObsolete=function(cb,cc){var cd;cd=cb.s;if(cd==null)_1.Obsolete(cc);else cd!=null&&cd.$==2?_1.EnqueueSafe(cd.$1,cc):cd!=null&&cd.$==3?_1.EnqueueSafe(cd.$1,cc):void 0;};_1.EnqueueSafe=function(cb,cc){var cd,ce,cf,cg;cb.push(cc);if(cb.length%20===0){cd=cb.slice(0);b4.Clear(cb);for(ce=0,cf=m.length(cd)-1;ce<=cf;ce++){cg=m.get(cd,ce);if(typeof cg=="object")(function(ch){if(ch.s)cb.push(ch);}(cg));else(function(ch){cb.push(ch);}(cg));}}else void 0;};_2=B.Scheduler=b9.Class({Fork:function(cb){var cc;cc=this;this.robin.push(cb);if(this.idle){this.idle=false;a.setTimeout(function(){cc.tick();},0);}},tick:function(){var cb,cc,cd;cc=this;cd=ca.now();cb=true;while(cb)if(this.robin.length===0){this.idle=true;cb=false;}else{(this.robin.shift())();ca.now()-cd>40?(a.setTimeout(function(){cc.tick();},0),cb=false):void 0;}}},g,_2);_2.New=b9.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},_2);_4=z.NonStandardPromiseRejectionException=b9.Class({},_3,_4);_4.New=b9.Ctor(function(cb){this.message="Promise rejected";L.setPrototypeOf(this,_4.prototype);this.reason=cb;},_4);_5.$cctor=function(){_5.$cctor=a.ignore;_5.noneCT=N.New(false,[]);_5.scheduler=new _2.New();_5.defCTS=[new bf.New()];_5.Zero=B.Return();_5.GetCT=function(cb){cb.k({$:0,$0:cb.ct});};};_6.notPresent=function(){throw new bS.New();};_7.Get=function(cb){return cb instanceof a.Array?_7.ArrayEnumerator(cb):q.Equals(typeof cb,"string")?_7.StringEnumerator(cb):cb.GetEnumerator();};_7.ArrayEnumerator=function(cb){return new _8.New(0,null,function(cc){var cd;cd=cc.s;return cd<m.length(cb)&&(cc.c=m.get(cb,cd),cc.s=cd+1,true);},void 0);};_7.StringEnumerator=function(cb){return new _8.New(0,null,function(cc){var cd;cd=cc.s;return cd<cb.length&&(cc.c=cb[cd],cc.s=cd+1,true);},void 0);};_7.Get0=function(cb){return cb instanceof a.Array?_7.ArrayEnumerator(cb):q.Equals(typeof cb,"string")?_7.StringEnumerator(cb):"GetEnumerator0"in cb?cb.GetEnumerator0():cb.GetEnumerator();};_8=_7.T=b9.Class({MoveNext:function(){var cb;cb=this.n(this);this.e=cb?1:2;return cb;},Current:function(){return this.e===1?this.c:this.e===0?f.FailWith("Enumeration has not started. Call MoveNext."):f.FailWith("Enumeration already finished.");},Dispose:function(){if(this.d)this.d(this);}},g,_8);_8.New=b9.Ctor(function(cb,cc,cd,ce){g.New.call(this);this.s=cb;this.c=cc;this.n=cd;this.d=ce;this.e=0;},_8);_.$cctor=function(){_.$cctor=a.ignore;_.LoadedTemplates=new I.New$5();_.LocalTemplatesLoaded=false;_.GlobalHoles=new I.New$5();_.TextHoleRE="\\${([^}]+)}";_.RenderedFullDocTemplate=null;};$.LinkElement=function(cb,cc){$.InsertDoc(cb,cc,null);};$.InsertDoc=function(cb,cc,cd){var ce,cf,cg;while(true)if(cc!=null&&cc.$==1)return $.InsertNode(cb,cc.$0.El,cd);else if(cc!=null&&cc.$==2){ce=cc.$0;ce.Dirty=false;cc=ce.Current;}else if(cc==null)return cd;else if(cc!=null&&cc.$==4)return $.InsertNode(cb,cc.$0.Text,cd);else if(cc!=null&&cc.$==5)return $.InsertNode(cb,cc.$0,cd);else if(cc!=null&&cc.$==6)return m.foldBack(function(ch,ci){return(((b9.Curried3(function(cj,ck,cl){return ck==null||ck.constructor===L?$.InsertDoc(cj,ck,cl):$.InsertNode(cj,ck,cl);}))(cb))(ch))(ci);},cc.$0.Els,cd);else{cf=cc.$1;cg=cc.$0;cc=cg;cd=$.InsertDoc(cb,cf,cd);}};$.CreateRunState=function(cb,cc){return bI.New(bJ.get_Empty(),$.CreateElemNode(cb,bs.EmptyAttr(),cc));};$.PerformAnimatedUpdate=function(cb,cc,cd){var ce;return bn.get_UseAnimations()?(ce=null,B.Delay(function(){var cf,cg,ch;cf=bJ.FindAll(cd);cg=$.ComputeChangeAnim(cc,cf);ch=$.ComputeEnterAnim(cc,cf);return B.Bind(bn.Play(bn.Append(cg,$.ComputeExitAnim(cc,cf))),function(){return B.Bind($.SyncElemNodesNextFrame(cb,cc),function(){return B.Bind(bn.Play(ch),function(){cc.PreviousNodes=cf;return B.Return(null);});});});})):$.SyncElemNodesNextFrame(cb,cc);};$.PerformSyncUpdate=function(cb,cc,cd){var ce;ce=bJ.FindAll(cd);$.SyncElemNode(cb,cc.Top);cc.PreviousNodes=ce;};$.InsertBeforeDelim=function(cb,cc){var cd,ce;cd=cb.parentNode;ce=self.document.createTextNode("");cd.insertBefore(ce,cb);$.LinkPrevElement(cb,cc);return ce;};$.InsertNode=function(cb,cc,cd){bl.InsertAt(cb,cd,cc);return cc;};$.CreateElemNode=function(cb,cc,cd){var ce;$.LinkElement(cb,cd);ce=bs.Insert(cb,cc);return ba.New(ce,cd,null,cb,bd.Int(),b9.GetOptional(ce.OnAfterRender));};$.SyncElemNodesNextFrame=function(cb,cc){function cd(ce){a.requestAnimationFrame(function(){$.SyncElemNode(cb,cc.Top);ce();});}return bo.BatchUpdatesEnabled()?B.FromContinuations(function(ce,cf,cg){return cd.apply(null,[ce,cf,cg]);}):($.SyncElemNode(cb,cc.Top),B.Return(null));};$.ComputeExitAnim=function(cb,cc){return bn.Concat(m.map(function(cd){return bs.GetExitAnim(cd.Attr);},bJ.ToArray(bJ.Except(cc,bJ.Filter(function(cd){return bs.HasExitAnim(cd.Attr);},cb.PreviousNodes)))));};$.ComputeEnterAnim=function(cb,cc){return bn.Concat(m.map(function(cd){return bs.GetEnterAnim(cd.Attr);},bJ.ToArray(bJ.Except(cb.PreviousNodes,bJ.Filter(function(cd){return bs.HasEnterAnim(cd.Attr);},cc)))));};$.ComputeChangeAnim=function(cb,cc){var cd;function ce(cf){return bs.HasChangeAnim(cf.Attr);}cd=function(cf){return bJ.Filter(ce,cf);};return bn.Concat(m.map(function(cf){return bs.GetChangeAnim(cf.Attr);},bJ.ToArray(bJ.Intersect(cd(cb.PreviousNodes),cd(cc)))));};$.SyncElemNode=function(cb,cc){!cb?$.SyncElement(cc):void 0;$.Sync(cc.Children);$.AfterRender(cc);};$.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};$.UpdateTextNode=function(cb,cc){cb.Value=cc;cb.Dirty=true;};$.LinkPrevElement=function(cb,cc){$.InsertDoc(cb.parentNode,cc,cb);};$.SyncElement=function(cb){function cc(cd){function ce(cf){var cg,ch,ci,cj;while(true){if(cf!=null&&cf.$==0){ch=cf.$1;ci=cf.$0;if(ce(ci))return true;else cf=ch;}else if(cf!=null&&cf.$==2){cj=cf.$0;if(cj.Dirty)return true;else cf=cj.Current;}else return cf!=null&&cf.$==6&&(cg=cf.$0,cg.Dirty||m.exists(cc,cg.Holes));}}return ce(cd.Children);}bs.Sync(cb.El,cb.Attr);if(cc(cb))$.DoSyncElement(cb);};$.Sync=function(cb){var cc,cd,ce,cf,cg;while(true){if(cb!=null&&cb.$==1)return $.SyncElemNode(false,cb.$0);else if(cb!=null&&cb.$==2){ce=cb.$0;cb=ce.Current;}else if(cb==null)return null;else if(cb!=null&&cb.$==5)return null;else if(cb!=null&&cb.$==4){cc=cb.$0;return cc.Dirty?(cc.Text.nodeValue=cc.Value,cc.Dirty=false):null;}else if(cb!=null&&cb.$==6){cd=cb.$0;m.iter(function(ch){$.SyncElemNode(false,ch);},cd.Holes);m.iter(function(ch){bs.Sync(ch[0],ch[1]);},cd.Attrs);return $.AfterRender(cd);}else{cf=cb.$1;cg=cb.$0;$.Sync(cg);cb=cf;}}};$.AfterRender=function(cb){var cc;cc=b9.GetOptional(cb.Render);if(cc!=null&&cc.$==1){cc.$0(cb.El);b9.SetOptional(cb,"Render",null);}};$.DoSyncElement=function(cb){var cc,cd,ce;function cf(cg,ch){var ci,cj,ck,cl;while(true){if(cg!=null&&cg.$==1)return cg.$0.El;else if(cg!=null&&cg.$==2){cj=cg.$0;if(cj.Dirty){cj.Dirty=false;return $.InsertDoc(cc,cj.Current,ch);}else cg=cj.Current;}else if(cg==null)return ch;else if(cg!=null&&cg.$==4)return cg.$0.Text;else if(cg!=null&&cg.$==5)return cg.$0;else if(cg!=null&&cg.$==6){ci=cg.$0;ci.Dirty?ci.Dirty=false:void 0;return m.foldBack(function(cm,cn){return cm==null||cm.constructor===L?cf(cm,cn):cm;},ci.Els,ch);}else{ck=cg.$1;cl=cg.$0;cg=cl;ch=cf(ck,ch);}}}cc=cb.El;bZ.Iter((cd=cb.El,function(cg){bl.RemoveNode(cd,cg);}),bZ.Except(bZ.DocChildren(cb),bZ.Children(cb.El,b9.GetOptional(cb.Delimiters))));cf(cb.Children,(ce=b9.GetOptional(cb.Delimiters),ce!=null&&ce.$==1?ce.$0[1]:null));};ba=h.DocElemNode=b9.Class({Equals:function(cb){return this.ElKey===cb.ElKey;},GetHashCode:function(){return this.ElKey;}},null,ba);ba.New=function(cb,cc,cd,ce,cf,cg){var ch;return new ba((ch={Attr:cb,Children:cc,El:ce,ElKey:cf},(b9.SetOptional(ch,"Delimiters",cd),b9.SetOptional(ch,"Render",cg),ch)));};bd.Int=function(){bd.set_counter(bd.counter()+1);return bd.counter();};bd.set_counter=function(cb){bN.$cctor();bN.counter=cb;};bd.counter=function(){bN.$cctor();return bN.counter;};be=b.OperationCanceledException=b9.Class({},_3,be);be.New=b9.Ctor(function(cb){be.New$1.call(this,"The operation was canceled.",null,cb);},be);be.New$1=b9.Ctor(function(cb,cc,cd){this.message=cb;this.inner=cc;L.setPrototypeOf(this,be.prototype);this.ct=cd;},be);bf=b.CancellationTokenSource=b9.Class({},g,bf);bf.New=b9.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bf);bh=h.Elt=b9.Class({},G,bh);bh.TreeNode=function(cb,cc){var cd,ce;function cf(cg,ch){return bs.Updates(ch);}cd=bF.Create(cc);return new bh.New$1({$:6,$0:cb},Y.Map2Unit((ce=m.map(function(cg){return cf(cg[0],cg[1]);},cb.Attrs),bE.TreeReduce(Y.Const(),Y.Map2Unit,ce)),cd.v),m.get(cb.Els,0),cd);};bh.New$1=b9.Ctor(function(cb,cc,cd,ce){G.New.call(this,cb,cc);this.docNode$1=cb;this.updates$1=cc;this.elt=cd;this.rvUpdates=ce;},bh);Y.Const=function(cb){var cc;cc=_1.New({$:0,$0:cb});return function(){return cc;};};Y.Sink=function(cb,cc){function cd(){_1.WhenRun(cc(),cb,function(){B.scheduler().Fork(cd);});}B.scheduler().Fork(cd);};Y.Map=function(cb,cc){return Y.CreateLazy(function(){return _1.Map(cb,cc());});};Y.Map3=function(cb,cc,cd,ce){return Y.CreateLazy(function(){return _1.Map3(cb,cc(),cd(),ce());});};Y.Sequence=function(cb){return Y.CreateLazy(function(){return _1.Sequence(P.map(function(cc){return cc();},cb));});};Y.Map2=function(cb,cc,cd){return Y.CreateLazy(function(){return _1.Map2(cb,cc(),cd());});};Y.Map2Unit=function(cb,cc){return Y.CreateLazy(function(){return _1.Map2Unit(cb(),cc());});};Y.CreateLazy=function(cb){var cc;cc={c:null,o:cb};return function(){var cd,ce;cd=cc.c;return cd===null?(cd=cc.o(),cc.c=cd,(ce=cd.s,ce!=null&&ce.$==0)?cc.o=null:_1.WhenObsoleteRun(cd,function(){cc.c=null;}),cd):cd;};};bj.convertTextNode=function(cb){var cc,cd,ce,cf,cg,ch;cc=null;cd=0;cf=cb.textContent;cg=new a.RegExp(F.TextHoleRE(),"g");while(cc=cg.exec(cf),cc!==null){cb.parentNode.insertBefore(self.document.createTextNode(bk.string(cf,{$:1,$0:cd},{$:1,$0:cg.lastIndex-m.get(cc,0).length-1})),cb);cd=cg.lastIndex;ch=self.document.createElement("span");ch.setAttribute("ws-replace",m.get(cc,1).toLowerCase());cb.parentNode.insertBefore(ch,cb);}cg.lastIndex=0;cb.textContent=bk.string(cf,{$:1,$0:cd},null);};bj.failNotLoaded=function(cb){b_.warn("Instantiating non-loaded template",cb);};bj.fillTextHole=function(cb,cc,cd){var ce;ce=cb.querySelector("[ws-replace]");return q.Equals(ce,null)?(b_.warn("Filling non-existent text hole",cd),null):(ce.parentNode.replaceChild(self.document.createTextNode(cc),ce),{$:1,$0:ce.getAttribute("ws-replace")});};bj.removeHolesExcept=function(cb,cc){function cd(ce){F.foreachNotPreserved(cb,"["+ce+"]",function(cf){if(!cc.Contains(cf.getAttribute(ce)))cf.removeAttribute(ce);});}cd("ws-attr");cd("ws-onafterrender");cd("ws-var");F.foreachNotPreserved(cb,"[ws-hole]",function(ce){if(!cc.Contains(ce.getAttribute("ws-hole"))){ce.removeAttribute("ws-hole");while(ce.hasChildNodes())ce.removeChild(ce.lastChild);}});F.foreachNotPreserved(cb,"[ws-replace]",function(ce){if(!cc.Contains(ce.getAttribute("ws-replace")))ce.parentNode.removeChild(ce);});F.foreachNotPreserved(cb,"[ws-on]",function(ce){ce.setAttribute("ws-on",bD.concat(" ",m.filter(function(cf){return cc.Contains(m.get(bD.SplitChars(cf,[":"],1),1));},bD.SplitChars(ce.getAttribute("ws-on"),[" "],1))));});F.foreachNotPreserved(cb,"[ws-attr-holes]",function(ce){var cf,cg,ch,ci,cj;cf=bD.SplitChars(ce.getAttribute("ws-attr-holes"),[" "],1);for(cg=0,ch=cf.length-1;cg<=ch;cg++){ci=m.get(cf,cg);ce.setAttribute(ci,(cj=new a.RegExp(F.TextHoleRE(),"g"),ce.getAttribute(ci).replace(cj,function(ck,cl){return cc.Contains(cl)?ck:"";})));}});};bj.fillInstanceAttrs=function(cb,cc){var cd,ce,cf,cg,ch;bj.convertAttrs(cc);cd=cc.nodeName.toLowerCase();ce=cb.querySelector("[ws-attr="+cd+"]");if(q.Equals(ce,null))b_.warn("Filling non-existent attr hole",cd);else{ce.removeAttribute("ws-attr");for(cf=0,cg=cc.attributes.length-1;cf<=cg;cf++){ch=cc.attributes.item(cf);if(ch.name=="class"&&ce.hasAttribute("class"))ce.setAttribute("class",ce.getAttribute("class")+" "+ch.nodeValue);else ce.setAttribute(ch.name,ch.nodeValue);}}};bj.mapHoles=function(cb,cc){function cd(ce){F.foreachNotPreserved(cb,"["+ce+"]",function(cf){var cg,ch;cg=(ch=null,[cc.TryGetValue(cf.getAttribute(ce).toLowerCase(),{get:function(){return ch;},set:function(ci){ch=ci;}}),ch]);if(cg[0])cf.setAttribute(ce,cg[1]);});}cd("ws-hole");cd("ws-replace");cd("ws-attr");cd("ws-onafterrender");cd("ws-var");F.foreachNotPreserved(cb,"[ws-on]",function(ce){ce.setAttribute("ws-on",bD.concat(" ",m.map(function(cf){var cg,ch,ci;cg=bD.SplitChars(cf,[":"],1);ch=(ci=null,[cc.TryGetValue(m.get(cg,1),{get:function(){return ci;},set:function(cj){ci=cj;}}),ci]);return ch[0]?m.get(cg,0)+":"+ch[1]:cf;},bD.SplitChars(ce.getAttribute("ws-on"),[" "],1))));});F.foreachNotPreserved(cb,"[ws-attr-holes]",function(ce){var cf,cg,ch;cf=bD.SplitChars(ce.getAttribute("ws-attr-holes"),[" "],1);for(cg=0,ch=cf.length-1;cg<=ch;cg++)(function(){var ci;function cj(ck,cl){var cm;cm=f.KeyValue(cl);return ck.replace(new a.RegExp("\\${"+cm[0]+"}","ig"),"${"+cm[1]+"}");}ci=m.get(cf,cg);return ce.setAttribute(ci,(((b9.Curried3(P.fold))(cj))(ce.getAttribute(ci)))(cc));}());});};bj.fill=function(cb,cc,cd){while(true)if(cb.hasChildNodes())cd=cc.insertBefore(cb.lastChild,cd);else return null;};bj.convertAttrs=function(cb){var cd,ce,cf,cg,ch,ci,cj,ck;function cc(cl){var cm;cm=cb.getAttribute(cl);if(cm==null);else cb.setAttribute(cl,cm.toLowerCase());}cd=cb.attributes;ce=[];cf=[];cg=[];for(ch=0,ci=cd.length-1;ch<=ci;ch++){cj=cd.item(ch);if(bD.StartsWith(cj.nodeName,"ws-on")&&cj.nodeName!="ws-onafterrender"&&cj.nodeName!="ws-on"){ce.push(cj.nodeName);cf.push(bk.string(cj.nodeName,{$:1,$0:"ws-on".length},null)+":"+cj.nodeValue.toLowerCase());}else!bD.StartsWith(cj.nodeName,"ws-")&&(new a.RegExp(F.TextHoleRE())).test(cj.nodeValue)?(cj.nodeValue=(ck=new a.RegExp(F.TextHoleRE(),"g"),cj.nodeValue.replace(ck,function(cl,cm){return"${"+cm.toLowerCase()+"}";})),cg.push(cj.nodeName)):void 0;}if(!(cf.length==0))cb.setAttribute("ws-on",bD.concat(" ",cf));if(!(cg.length==0))cb.setAttribute("ws-attr-holes",bD.concat(" ",cg));cc("ws-hole");cc("ws-replace");cc("ws-attr");cc("ws-onafterrender");cc("ws-var");m.iter(function(cl){cb.removeAttribute(cl);},ce);};bk.string=function(cb,cc,cd){var ce,cf;return cc==null?cd!=null&&cd.$==1?(ce=cd.$0,ce<0?"":cb.slice(0,ce+1)):"":cd==null?cb.slice(cc.$0):(cf=cd.$0,cf<0?"":cb.slice(cc.$0,cf+1));};bl.ParseHTMLIntoFakeRoot=function(cb){var cc,cd,ce,cf,cg;function ch(ci,cj){var ck;while(true)if(cj===0)return ci;else{ck=cj;ci=ci.lastChild;cj=ck-1;}}cc=self.document.createElement("div");return!bl.rhtml().test(cb)?(cc.appendChild(self.document.createTextNode(cb)),cc):(cd=(ce=bl.rtagName().exec(cb),q.Equals(ce,null)?"":m.get(ce,1).toLowerCase()),(cf=(cg=(bl.wrapMap())[cd],cg?cg:bl.defaultWrap()),(cc.innerHTML=cf[1]+cb.replace(bl.rxhtmlTag(),"<$1></$2>")+cf[2],ch(cc,cf[0]))));};bl.ChildrenArray=function(cb){var cc,cd,ce;cc=[];for(cd=0,ce=cb.childNodes.length-1;cd<=ce;cd++)cc.push(cb.childNodes[cd]);return cc;};bl.rhtml=function(){bO.$cctor();return bO.rhtml;};bl.wrapMap=function(){bO.$cctor();return bO.wrapMap;};bl.defaultWrap=function(){bO.$cctor();return bO.defaultWrap;};bl.rxhtmlTag=function(){bO.$cctor();return bO.rxhtmlTag;};bl.rtagName=function(){bO.$cctor();return bO.rtagName;};bl.IterSelector=function(cb,cc,cd){var ce,cf,cg;ce=cb.querySelectorAll(cc);for(cf=0,cg=ce.length-1;cf<=cg;cf++)cd(ce[cf]);};bl.IterSelectorDoc=function(cb,cc){var cd,ce,cf;cd=self.document.querySelectorAll(cb);for(ce=0,cf=cd.length-1;ce<=cf;ce++)cc(cd[ce]);};bl.InsertAt=function(cb,cc,cd){var ce;if(!(cd.parentNode===cb&&cc===(ce=cd.nextSibling,q.Equals(ce,null)?null:ce)))cb.insertBefore(cd,cc);};bl.RemoveNode=function(cb,cc){if(cc.parentNode===cb)cb.removeChild(cc);};P.insufficient=function(){return f.FailWith("The input sequence has an insufficient number of elements.");};P.nonNegative=function(){return f.FailWith("The input must be non-negative.");};bm=H.KeyCollection=b9.Class({GetEnumerator:function(){return _7.Get(P.map(function(cb){return cb.K;},this.d));}},g,bm);bm.New=b9.Ctor(function(cb){g.New.call(this);this.d=cb;},bm);bn.get_UseAnimations=function(){return bK.UseAnimations();};bn.Play=function(cb){var cc;cc=null;return B.Delay(function(){return B.Bind(bn.Run(a.ignore,bK.Actions(cb)),function(){bK.Finalize(cb);return B.Return(null);});});};bn.Append=function(cb,cc){return{$:0,$0:bQ.Append(cb.$0,cc.$0)};};bn.Run=function(cb,cc){var cd;function ce(cf){function cg(ch){return function(ci){var cj;cj=ci-ch;cc.Compute(cj);cb();return cj<=cd?void a.requestAnimationFrame(function(ck){(cg(ch))(ck);}):cf();};}a.requestAnimationFrame(function(ch){(cg(ch))(ch);});}cd=cc.Duration;return cd===0?B.Zero():B.FromContinuations(function(cf,cg,ch){return ce.apply(null,[cf,cg,ch]);});};bn.Concat=function(cb){return{$:0,$0:bQ.Concat(P.map(bK.List,cb))};};bn.get_Empty=function(){return{$:0,$0:bQ.Empty()};};bo.BatchUpdatesEnabled=function(){bL.$cctor();return bL.BatchUpdatesEnabled;};bp.StartProcessor=function(cb){var cc;function cd(){var ce;ce=null;return B.Delay(function(){return B.Bind(cb,function(){var cf;cf=cc[0];return q.Equals(cf,1)?(cc[0]=0,B.Zero()):q.Equals(cf,2)?(cc[0]=1,cd()):B.Zero();});});}cc=[0];return function(){var ce;ce=cc[0];if(q.Equals(ce,0)){cc[0]=1;B.Start(cd(),null);}else q.Equals(ce,1)?cc[0]=2:void 0;};};br.New=function(cb,cc,cd,ce){var cf;cf={DynElem:cb,DynFlags:cc,DynNodes:cd};b9.SetOptional(cf,"OnAfterRender",ce);return cf;};_1.Obsolete=function(cb){var cc,cd,ce,cf,cg;cd=cb.s;if(cd==null||(cd!=null&&cd.$==2?(cc=cd.$1,false):cd!=null&&cd.$==3?(cc=cd.$1,false):true))void 0;else{cb.s=null;for(ce=0,cf=m.length(cc)-1;ce<=cf;ce++){cg=m.get(cc,ce);if(typeof cg=="object")(function(ch){_1.Obsolete(ch);}(cg));else cg();}}};_1.New=function(cb){return{s:cb};};bs.Insert=function(cb,cc){var cd,ce,cf;function cg(ch){var ci,cj;while(true)if(!(ch===null)){if(ch!=null&&ch.$==1)return cd.push(ch.$0);else if(ch!=null&&ch.$==2){ci=ch.$1;cj=ch.$0;cg(cj);ch=ci;}else return ch!=null&&ch.$==3?ch.$0(cb):ch!=null&&ch.$==4?ce.push(ch.$0):null;}else return null;}cd=[];ce=[];cg(cc);cf=cd.slice(0);return br.New(cb,bs.Flags(cc),cf,ce.length===0?null:{$:1,$0:function(ch){P.iter(function(ci){ci(ch);},ce);}});};bs.Updates=function(cb){return bE.MapTreeReduce(function(cc){return cc.NChanged();},Y.Const(),Y.Map2Unit,cb.DynNodes);};bs.Empty=function(cb){return br.New(cb,0,[],null);};bs.Flags=function(cb){return cb!==null&&cb.hasOwnProperty("flags")?cb.flags:0;};bs.Static=function(cb){return new by({$:3,$0:cb});};bs.Dynamic=function(cb,cc){return new by({$:1,$0:new bR.New(cb,cc)});};bs.EmptyAttr=function(){bT.$cctor();return bT.EmptyAttr;};bs.HasExitAnim=function(cb){var cc;cc=2;return(cb.DynFlags&cc)===cc;};bs.GetExitAnim=function(cb){return bs.GetAnim(cb,function(cc,cd){return cc.NGetExitAnim(cd);});};bs.HasEnterAnim=function(cb){var cc;cc=1;return(cb.DynFlags&cc)===cc;};bs.GetEnterAnim=function(cb){return bs.GetAnim(cb,function(cc,cd){return cc.NGetEnterAnim(cd);});};bs.HasChangeAnim=function(cb){var cc;cc=4;return(cb.DynFlags&cc)===cc;};bs.GetChangeAnim=function(cb){return bs.GetAnim(cb,function(cc,cd){return cc.NGetChangeAnim(cd);});};bs.AppendTree=function(cb,cc){var cd;return cb===null?cc:cc===null?cb:(cd=new by({$:2,$0:cb,$1:cc}),(bs.SetFlags(cd,bs.Flags(cb)|bs.Flags(cc)),cd));};bs.GetAnim=function(cb,cc){return bn.Concat(m.map(function(cd){return cc(cd,cb.DynElem);},cb.DynNodes));};bs.Sync=function(cb,cc){m.iter(function(cd){cd.NSync(cb);},cc.DynNodes);};bs.SetFlags=function(cb,cc){cb.flags=cc;};bt=t.Elt=b9.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},s,bt);bu=t.Text=b9.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;},get_AsChoiceView:function(){return{$:0,$0:this.fillWith};}},s,bu);bv=t.Attribute=b9.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},s,bv);bw=t.Event=b9.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},s,bw);bx.Handler=function(cb,cc){return bs.Static(function(cd){cd.addEventListener(cb,function(ce){return(cc(cd))(ce);},false);});};bx.OnAfterRender=function(cb){return new by({$:4,$0:cb});};bx.Dynamic=function(cb,cc){return bs.Dynamic(cc,function(cd){return function(ce){return cd.setAttribute(cb,ce);};});};bx.Value=function(cb){return bx.ValueWith(bW.StringApply(),cb);};bx.FloatValueUnchecked=function(cb){return bx.ValueWith(bW.FloatApplyUnchecked(),cb);};bx.Checked=function(cb){return bx.ValueWith(bW.BoolCheckedApply(),cb);};bx.DateTimeValue=function(cb){return bx.ValueWith(bW.DateTimeApplyUnchecked(),cb);};bx.FileValue=function(cb){return bx.ValueWith(bW.FileApplyUnchecked(),cb);};bx.ValueWith=function(cb,cc){var cd;cd=cb(cc);return by.Append(bs.Static(cd[0]),bx.DynamicCustom(cd[1],cd[2]));};bx.DynamicCustom=function(cb,cc){return bs.Dynamic(cc,cb);};by=h.AttrProxy=b9.Class({},null,by);by.Handler=function(cb,cc){return by.HandlerImpl(cb,cc);};by.Concat=function(cb){var cc;cc=bE.ofSeqNonCopying(cb);return bE.TreeReduce(bs.EmptyAttr(),by.Append,cc);};by.Create=function(cb,cc){return bs.Static(function(cd){cd.setAttribute(cb,cc);});};by.HandlerImpl=function(cb,cc){return bs.Static(function(cd){cd.addEventListener(cb,function(ce){return(cc(cd))(ce);},false);});};by.Append=function(cb,cc){return bs.AppendTree(cb,cc);};bz=t.AfterRender=b9.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},s,bz);bA=t.AfterRenderQ=b9.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},s,bA);bC=bB.T=b9.Class({GetEnumerator:function(){return new _8.New(this,null,function(cb){var cc;cc=cb.s;return cc.$==0?false:(cb.c=cc.$0,cb.s=cc.$1,true);},void 0);}},null,bC);bC.Empty=new bC({$:0});bD.concat=function(cb,cc){return m.ofSeq(cc).join(cb);};bD.SplitChars=function(cb,cc,cd){return bD.Split(cb,new a.RegExp("["+bD.RegexEscape(cc.join(""))+"]"),cd);};bD.StartsWith=function(cb,cc){return cb.substring(0,cc.length)==cc;};bD.Split=function(cb,cc,cd){return cd===1?m.filter(function(ce){return ce!=="";},bD.SplitWith(cb,cc)):bD.SplitWith(cb,cc);};bD.RegexEscape=function(cb){return cb.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bD.SplitWith=function(cb,cc){return cb.split(cc);};bD.forall=function(cb,cc){return P.forall(cb,bD.protect(cc));};bD.protect=function(cb){return cb==null?"":cb;};bE.TreeReduce=function(cb,cc,cd){var ce;function cf(cg){return function(ch){var ci,cj;switch(ch<=0?0:ch===1?cg>=0&&cg<ce?1:(ci=ch,2):(ci=ch,2)){case 0:return cb;case 1:return m.get(cd,cg);case 2:cj=ch/2>>0;return cc((cf(cg))(cj),(cf(cg+cj))(ch-cj));}};}ce=m.length(cd);return(cf(0))(ce);};bE.MapTreeReduce=function(cb,cc,cd,ce){var cf;function cg(ch){return function(ci){var cj,ck;switch(ci<=0?0:ci===1?ch>=0&&ch<cf?1:(cj=ci,2):(cj=ci,2)){case 0:return cc;case 1:return cb(m.get(ce,ch));case 2:ck=ci/2>>0;return cd((cg(ch))(ck),(cg(ch+ck))(ci-ck));}};}cf=m.length(ce);return(cg(0))(cf);};bE.ofSeqNonCopying=function(cb){var cc,cd;if(cb instanceof a.Array)return cb;else if(cb instanceof bC)return m.ofList(cb);else if(cb===null)return[];else{cc=[];cd=_7.Get(cb);try{while(cd.MoveNext())cc.push(cd.Current());return cc;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}}};bF=h.Updates=b9.Class({},null,bF);bF.Create=function(cb){var cc;cc=null;cc=bF.New(cb,null,function(){var cd;cd=cc.s;return cd===null?(cd=_1.Copy(cc.c()),cc.s=cd,_1.WhenObsoleteRun(cd,function(){cc.s=null;}),cd):cd;});return cc;};bF.New=function(cb,cc,cd){return new bF({c:cb,s:cc,v:cd});};bG=H.ValueCollection=b9.Class({GetEnumerator:function(){return _7.Get(P.map(function(cb){return cb.V;},this.d));}},g,bG);bG.New=b9.Ctor(function(cb){g.New.call(this);this.d=cb;},bG);bI.New=function(cb,cc){return{PreviousNodes:cb,Top:cc};};bJ.get_Empty=function(){return{$:0,$0:new O.New$3()};};bJ.FindAll=function(cb){var cc;function cd(cg,ch){var ci,cj,ck,cl,cm;while(true)switch(cg){case 0:if(ch!=null&&ch.$==0){cj=ch.$1;ck=ch.$0;cd(0,ck);ch=cj;}else if(ch!=null&&ch.$==1){cl=ch.$0;ch=cl;cg=1;}else if(ch!=null&&ch.$==2){cm=ch.$0;ch=cm.Current;}else return ch!=null&&ch.$==6?(ci=ch.$0.Holes,(function(cn){return function(co){m.iter(cn,co);};}(cf))(ci)):null;break;case 1:cc.push(ch);ch=ch.Children;cg=0;break;}}function ce(cg){return cd(0,cg);}function cf(cg){return cd(1,cg);}cc=[];ce(cb);return{$:0,$0:new O.New$2(cc)};};bJ.Filter=function(cb,cc){return{$:0,$0:bV.Filter(cb,cc.$0)};};bJ.Except=function(cb,cc){return{$:0,$0:bV.Except(cb.$0,cc.$0)};};bJ.ToArray=function(cb){return bV.ToArray(cb.$0);};bJ.Intersect=function(cb,cc){return{$:0,$0:bV.Intersect(cb.$0,cc.$0)};};bK.UseAnimations=function(){bP.$cctor();return bP.UseAnimations;};bK.Actions=function(cb){return bK.ConcatActions(m.choose(function(cc){return cc.$==1?{$:1,$0:cc.$0}:null;},bQ.ToArray(cb.$0)));};bK.Finalize=function(cb){m.iter(function(cc){if(cc.$==0)cc.$0();},bQ.ToArray(cb.$0));};bK.ConcatActions=function(cb){var cc,cd,ce,cf;cc=bE.ofSeqNonCopying(cb);cd=m.length(cc);return cd===0?bK.Const():cd===1?m.get(cc,0):(ce=P.max(P.map(function(cg){return cg.Duration;},cc)),(cf=m.map(function(cg){return bK.Prolong(ce,cg);},cc),bK.Def(ce,function(cg){m.iter(function(ch){ch.Compute(cg);},cf);})));};bK.List=function(cb){return cb.$0;};bK.Const=function(cb){return bK.Def(0,function(){return cb;});};bK.Def=function(cb,cc){return{Compute:cc,Duration:cb};};bK.Prolong=function(cb,cc){var cd,ce,cf;cd=cc.Compute;ce=cc.Duration;cf=b2.Create(function(){return cc.Compute(cc.Duration);});return{Compute:function(cg){return cg>=ce?cf.f():cd(cg);},Duration:cb};};bL.$cctor=function(){bL.$cctor=a.ignore;bL.BatchUpdatesEnabled=true;};bM.concat=function(cb){var cc,cd;cc=[];for(var ce in cb)cc.push.apply(cc,cb[ce]);return cc;};bN.$cctor=function(){bN.$cctor=a.ignore;bN.counter=0;};bO.$cctor=function(){var cb;bO.$cctor=a.ignore;bO.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bO.rtagName=new a.RegExp("<([\\w:]+)");bO.rhtml=new a.RegExp("<|&#?\\w+;");bO.wrapMap=(cb=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:cb,tbody:cb,tfoot:cb,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bO.defaultWrap=[0,"",""];};bP.$cctor=function(){bP.$cctor=a.ignore;bP.CubicInOut=bU.Custom(function(cb){var cc;cc=cb*cb;return 3*cc-2*(cc*cb);});bP.UseAnimations=true;};bQ.Append=function(cb,cc){return cb.$==0?cc:cc.$==0?cb:{$:2,$0:cb,$1:cc};};bQ.ToArray=function(cb){var cc;function cd(ce){var cf,cg;while(true)if(ce.$==1)return cc.push(ce.$0);else if(ce.$==2){cf=ce.$1;cg=ce.$0;cd(cg);ce=cf;}else return ce.$==3?m.iter(function(ch){cc.push(ch);},ce.$0):null;}cc=[];cd(cb);return cc.slice(0);};bQ.Concat=function(cb){var cc;cc=bE.ofSeqNonCopying(cb);return bE.TreeReduce(bQ.Empty(),bQ.Append,cc);};bQ.Empty=function(){b3.$cctor();return b3.Empty;};bR=h.DynamicAttrNode=b9.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(cb){return bn.get_Empty();},NGetEnterAnim:function(cb){return bn.get_Empty();},NGetChangeAnim:function(cb){return bn.get_Empty();},NSync:function(cb){if(this.dirty){(this.push(cb))(this.value);this.dirty=false;}}},g,bR);bR.New=b9.Ctor(function(cb,cc){var cd;cd=this;g.New.call(this);this.push=cc;this.value=void 0;this.dirty=false;this.updates=Y.Map(function(ce){cd.value=ce;cd.dirty=true;},cb);},bR);bS=b.KeyNotFoundException=b9.Class({},_3,bS);bS.New=b9.Ctor(function(){bS.New$1.call(this,"The given key was not present in the dictionary.");},bS);bS.New$1=b9.Ctor(function(cb){this.message=cb;L.setPrototypeOf(this,bS.prototype);},bS);bT.$cctor=function(){var cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co;bT.$cctor=a.ignore;bT.EmptyAttr=null;bT.BoolCheckedApply=function(cp){function cq(cr,cs){return cs!=null&&cs.$==1?void(cr.checked=cs.$0):null;}return[function(cr){cr.addEventListener("change",function(){return cp.Get()!=cr.checked?cp.Set(cr.checked):null;});},function(cr){return function(cs){return cq(cr,cs);};},Y.Map(function(cr){return{$:1,$0:cr};},cp.get_View())];};bT.StringSet=function(cp){return function(cq){cp.value=cq;};};bT.StringGet=function(cp){return{$:1,$0:cp.value};};bT.StringApply=(cb=bW.StringGet(),(cc=bW.StringSet(),function(cp){return bW.ApplyValue(cb,cc,cp);}));bT.DateTimeSetUnchecked=function(cp){return function(cq){cp.value=(new ca(cq)).toLocaleString();};};bT.DateTimeGetUnchecked=function(cp){var cq,cr,cs,ct;cq=cp.value;return bX.isBlank(cq)?{$:1,$0:-8640000000000000}:(cr=(cs=0,[(ct=b1.TryParse(cq),ct!=null&&ct.$==1&&(cs=ct.$0,true)),cs]),cr[0]?{$:1,$0:cr[1]}:null);};bT.DateTimeApplyUnchecked=(cd=bW.DateTimeGetUnchecked(),(ce=bW.DateTimeSetUnchecked(),function(cp){return bW.ApplyValue(cd,ce,cp);}));bT.FileSetUnchecked=function(){return function(){return null;};};bT.FileGetUnchecked=function(cp){var cq;cq=cp.files;return{$:1,$0:m.ofSeq(P.delay(function(){return P.map(function(cr){return cq.item(cr);},f.range(0,cq.length-1));}))};};bT.FileApplyUnchecked=(cf=bW.FileGetUnchecked(),(cg=bW.FileSetUnchecked(),function(cp){return bW.FileApplyValue(cf,cg,cp);}));bT.IntSetUnchecked=function(cp){return function(cq){cp.value=a.String(cq);};};bT.IntGetUnchecked=function(cp){var cq,cr;cq=cp.value;return bX.isBlank(cq)?{$:1,$0:0}:(cr=+cq,cr!==cr>>0?null:{$:1,$0:cr});};bT.IntApplyUnchecked=(ch=bW.IntGetUnchecked(),(ci=bW.IntSetUnchecked(),function(cp){return bW.ApplyValue(ch,ci,cp);}));bT.IntSetChecked=function(cp){return function(cq){var cr;cr=cq.get_Input();return cp.value!=cr?void(cp.value=cr):null;};};bT.IntGetChecked=function(cp){var cq,cr,cs;cq=cp.value;return{$:1,$0:bX.isBlank(cq)?(cp.checkValidity?cp.checkValidity():true)?new bY({$:2,$0:cq}):new bY({$:1,$0:cq}):(cr=(cs=0,[Z.TryParseInt32(cq,{get:function(){return cs;},set:function(ct){cs=ct;}}),cs]),cr[0]?new bY({$:0,$0:cr[1],$1:cq}):new bY({$:1,$0:cq}))};};bT.IntApplyChecked=(cj=bW.IntGetChecked(),(ck=bW.IntSetChecked(),function(cp){return bW.ApplyValue(cj,ck,cp);}));bT.FloatSetUnchecked=function(cp){return function(cq){cp.value=a.String(cq);};};bT.FloatGetUnchecked=function(cp){var cq,cr;cq=cp.value;return bX.isBlank(cq)?{$:1,$0:0}:(cr=+cq,a.isNaN(cr)?null:{$:1,$0:cr});};bT.FloatApplyUnchecked=(cl=bW.FloatGetUnchecked(),(cm=bW.FloatSetUnchecked(),function(cp){return bW.ApplyValue(cl,cm,cp);}));bT.FloatSetChecked=function(cp){return function(cq){var cr;cr=cq.get_Input();return cp.value!=cr?void(cp.value=cr):null;};};bT.FloatGetChecked=function(cp){var cq,cr;cq=cp.value;return{$:1,$0:bX.isBlank(cq)?(cp.checkValidity?cp.checkValidity():true)?new bY({$:2,$0:cq}):new bY({$:1,$0:cq}):(cr=+cq,a.isNaN(cr)?new bY({$:1,$0:cq}):new bY({$:0,$0:cr,$1:cq}))};};bT.FloatApplyChecked=(cn=bW.FloatGetChecked(),(co=bW.FloatSetChecked(),function(cp){return bW.ApplyValue(cn,co,cp);}));};bU=h.Easing=b9.Class({},g,bU);bU.Custom=function(cb){return new bU.New(cb);};bU.New=b9.Ctor(function(cb){g.New.call(this);this.transformTime=cb;},bU);bV.Filter=function(cb,cc){return new O.New$2(m.filter(cb,bV.ToArray(cc)));};bV.Except=function(cb,cc){var cd;cd=new O.New$2(bV.ToArray(cc));cd.ExceptWith(bV.ToArray(cb));return cd;};bV.ToArray=function(cb){var cc;cc=m.create(cb.Count(),void 0);cb.CopyTo(cc,0);return cc;};bV.Intersect=function(cb,cc){var cd;cd=new O.New$2(bV.ToArray(cb));cd.IntersectWith(bV.ToArray(cc));return cd;};bB.head=function(cb){return cb.$==1?cb.$0:bB.listEmpty();};bB.tail=function(cb){return cb.$==1?cb.$1:bB.listEmpty();};bB.listEmpty=function(){return f.FailWith("The input list was empty.");};bW.ApplyValue=function(cb,cc,cd){var ce;function cf(cg,ch){return ch==null?null:cg(ch.$0);}ce=null;return[function(cg){function ch(){cd.UpdateMaybe(function(ci){var cj;ce=cb(cg);return ce!=null&&ce.$==1&&(!q.Equals(ce.$0,ci)&&(cj=[ce,ce.$0],true))?cj[0]:null;});}cg.addEventListener("change",ch);cg.addEventListener("input",ch);cg.addEventListener("keypress",ch);},function(cg){var ch;ch=cc(cg);return function(ci){return cf(ch,ci);};},Y.Map(function(cg){var ch;return ce!=null&&ce.$==1&&(q.Equals(ce.$0,cg)&&(ch=ce.$0,true))?null:{$:1,$0:cg};},cd.get_View())];};bW.StringSet=function(){bT.$cctor();return bT.StringSet;};bW.StringGet=function(){bT.$cctor();return bT.StringGet;};bW.DateTimeSetUnchecked=function(){bT.$cctor();return bT.DateTimeSetUnchecked;};bW.DateTimeGetUnchecked=function(){bT.$cctor();return bT.DateTimeGetUnchecked;};bW.FileApplyValue=function(cb,cc,cd){var ce;function cf(cg,ch){return ch==null?null:cg(ch.$0);}ce=null;return[function(cg){cg.addEventListener("change",function(){cd.UpdateMaybe(function(ch){var ci;ce=cb(cg);return ce!=null&&ce.$==1&&(ce.$0!==ch&&(ci=[ce,ce.$0],true))?ci[0]:null;});});},function(cg){var ch;ch=cc(cg);return function(ci){return cf(ch,ci);};},Y.Map(function(cg){var ch;return ce!=null&&ce.$==1&&(q.Equals(ce.$0,cg)&&(ch=ce.$0,true))?null:{$:1,$0:cg};},cd.get_View())];};bW.FileSetUnchecked=function(){bT.$cctor();return bT.FileSetUnchecked;};bW.FileGetUnchecked=function(){bT.$cctor();return bT.FileGetUnchecked;};bW.IntSetUnchecked=function(){bT.$cctor();return bT.IntSetUnchecked;};bW.IntGetUnchecked=function(){bT.$cctor();return bT.IntGetUnchecked;};bW.IntSetChecked=function(){bT.$cctor();return bT.IntSetChecked;};bW.IntGetChecked=function(){bT.$cctor();return bT.IntGetChecked;};bW.FloatSetUnchecked=function(){bT.$cctor();return bT.FloatSetUnchecked;};bW.FloatGetUnchecked=function(){bT.$cctor();return bT.FloatGetUnchecked;};bW.FloatSetChecked=function(){bT.$cctor();return bT.FloatSetChecked;};bW.FloatGetChecked=function(){bT.$cctor();return bT.FloatGetChecked;};bW.StringApply=function(){bT.$cctor();return bT.StringApply;};bW.FloatApplyUnchecked=function(){bT.$cctor();return bT.FloatApplyUnchecked;};bW.BoolCheckedApply=function(){bT.$cctor();return bT.BoolCheckedApply;};bW.DateTimeApplyUnchecked=function(){bT.$cctor();return bT.DateTimeApplyUnchecked;};bW.FileApplyUnchecked=function(){bT.$cctor();return bT.FileApplyUnchecked;};bX.isBlank=function(cb){return bD.forall(b0.IsWhiteSpace,cb);};bY=h.CheckedInput=b9.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bY);bZ.Children=function(cb,cc){var cd,ce,cf;if(cc!=null&&cc.$==1){cf=[];cd=cc.$0[0].nextSibling;while(cd!==cc.$0[1]){cf.push(cd);cd=cd.nextSibling;}return{$:0,$0:cf};}else return{$:0,$0:m.init(cb.childNodes.length,(ce=cb.childNodes,function(cg){return ce[cg];}))};};bZ.Except=function(cb,cc){var cd;cd=cb.$0;return{$:0,$0:m.filter(function(ce){return m.forall(function(cf){return!(ce===cf);},cd);},cc.$0)};};bZ.Iter=function(cb,cc){m.iter(cb,cc.$0);};bZ.DocChildren=function(cb){var cc;function cd(ce){var cf,cg,ch,ci;while(true){if(ce!=null&&ce.$==2){cg=ce.$0;ce=cg.Current;}else if(ce!=null&&ce.$==1)return cc.push(ce.$0.El);else if(ce==null)return null;else if(ce!=null&&ce.$==5)return cc.push(ce.$0);else if(ce!=null&&ce.$==4)return cc.push(ce.$0.Text);else if(ce!=null&&ce.$==6){cf=ce.$0.Els;return(function(cj){return function(ck){m.iter(cj,ck);};}(function(cj){if(cj==null||cj.constructor===L)cd(cj);else cc.push(cj);}))(cf);}else{ch=ce.$1;ci=ce.$0;cd(ci);ce=ch;}}}cc=[];cd(cb.Children);return{$:0,$0:bE.ofSeqNonCopying(cc)};};b0.IsWhiteSpace=function(cb){return cb.match(new a.RegExp("\\s"))!==null;};b1.TryParse=function(cb){var cc;cc=ca.parse(cb);return a.isNaN(cc)?null:{$:1,$0:cc};};Z.TryParse=function(cb,cc,cd,ce){var cf,cg;cf=+cb;cg=cf===cf-cf%1&&cf>=cc&&cf<=cd;if(cg)ce.set(cf);return cg;};b2.Create=function(cb){return b6.New(false,cb,b2.forceLazy);};b2.forceLazy=function(){var cb;cb=this.v();this.c=true;this.v=cb;this.f=b2.cachedLazy;return cb;};b2.cachedLazy=function(){return this.v;};b3.$cctor=function(){b3.$cctor=a.ignore;b3.Empty={$:0};};b4.Clear=function(cb){cb.splice(0,m.length(cb));};b6.New=function(cb,cc,cd){return{c:cb,v:cc,f:cd};};b9.OnLoad(function(){e.Main();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
